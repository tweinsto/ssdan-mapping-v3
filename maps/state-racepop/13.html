<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Race by Year – Georgia</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 1em;
    }
    #buttons button {
      margin: 0 5px;
    }
    #chart-container {
      width: 90%;
      max-width: 800px;
      margin: auto;
    }
    
    #buttons button.active {
  background-color: dodgerblue;
  color: white;
  border: none;
  border-radius: 4px;
}

  </style>
</head>
<body>
  <h2>Race/Ethnicity Population – Georgia</h2>

  <label for="countySelect">County:</label>
  <select id="countySelect">
    <option value="Statewide" selected>Statewide</option>
<option value="Appling County">Appling County</option>
<option value="Atkinson County">Atkinson County</option>
<option value="Bacon County">Bacon County</option>
<option value="Baker County">Baker County</option>
<option value="Baldwin County">Baldwin County</option>
<option value="Banks County">Banks County</option>
<option value="Barrow County">Barrow County</option>
<option value="Bartow County">Bartow County</option>
<option value="Ben Hill County">Ben Hill County</option>
<option value="Berrien County">Berrien County</option>
<option value="Bibb County">Bibb County</option>
<option value="Bleckley County">Bleckley County</option>
<option value="Brantley County">Brantley County</option>
<option value="Brooks County">Brooks County</option>
<option value="Bryan County">Bryan County</option>
<option value="Bulloch County">Bulloch County</option>
<option value="Burke County">Burke County</option>
<option value="Butts County">Butts County</option>
<option value="Calhoun County">Calhoun County</option>
<option value="Camden County">Camden County</option>
<option value="Candler County">Candler County</option>
<option value="Carroll County">Carroll County</option>
<option value="Catoosa County">Catoosa County</option>
<option value="Charlton County">Charlton County</option>
<option value="Chatham County">Chatham County</option>
<option value="Chattahoochee County">Chattahoochee County</option>
<option value="Chattooga County">Chattooga County</option>
<option value="Cherokee County">Cherokee County</option>
<option value="Clarke County">Clarke County</option>
<option value="Clay County">Clay County</option>
<option value="Clayton County">Clayton County</option>
<option value="Clinch County">Clinch County</option>
<option value="Cobb County">Cobb County</option>
<option value="Coffee County">Coffee County</option>
<option value="Colquitt County">Colquitt County</option>
<option value="Columbia County">Columbia County</option>
<option value="Cook County">Cook County</option>
<option value="Coweta County">Coweta County</option>
<option value="Crawford County">Crawford County</option>
<option value="Crisp County">Crisp County</option>
<option value="Dade County">Dade County</option>
<option value="Dawson County">Dawson County</option>
<option value="Decatur County">Decatur County</option>
<option value="DeKalb County">DeKalb County</option>
<option value="Dodge County">Dodge County</option>
<option value="Dooly County">Dooly County</option>
<option value="Dougherty County">Dougherty County</option>
<option value="Douglas County">Douglas County</option>
<option value="Early County">Early County</option>
<option value="Echols County">Echols County</option>
<option value="Effingham County">Effingham County</option>
<option value="Elbert County">Elbert County</option>
<option value="Emanuel County">Emanuel County</option>
<option value="Evans County">Evans County</option>
<option value="Fannin County">Fannin County</option>
<option value="Fayette County">Fayette County</option>
<option value="Floyd County">Floyd County</option>
<option value="Forsyth County">Forsyth County</option>
<option value="Franklin County">Franklin County</option>
<option value="Fulton County">Fulton County</option>
<option value="Gilmer County">Gilmer County</option>
<option value="Glascock County">Glascock County</option>
<option value="Glynn County">Glynn County</option>
<option value="Gordon County">Gordon County</option>
<option value="Grady County">Grady County</option>
<option value="Greene County">Greene County</option>
<option value="Gwinnett County">Gwinnett County</option>
<option value="Habersham County">Habersham County</option>
<option value="Hall County">Hall County</option>
<option value="Hancock County">Hancock County</option>
<option value="Haralson County">Haralson County</option>
<option value="Harris County">Harris County</option>
<option value="Hart County">Hart County</option>
<option value="Heard County">Heard County</option>
<option value="Henry County">Henry County</option>
<option value="Houston County">Houston County</option>
<option value="Irwin County">Irwin County</option>
<option value="Jackson County">Jackson County</option>
<option value="Jasper County">Jasper County</option>
<option value="Jeff Davis County">Jeff Davis County</option>
<option value="Jefferson County">Jefferson County</option>
<option value="Jenkins County">Jenkins County</option>
<option value="Johnson County">Johnson County</option>
<option value="Jones County">Jones County</option>
<option value="Lamar County">Lamar County</option>
<option value="Lanier County">Lanier County</option>
<option value="Laurens County">Laurens County</option>
<option value="Lee County">Lee County</option>
<option value="Liberty County">Liberty County</option>
<option value="Lincoln County">Lincoln County</option>
<option value="Long County">Long County</option>
<option value="Lowndes County">Lowndes County</option>
<option value="Lumpkin County">Lumpkin County</option>
<option value="Macon County">Macon County</option>
<option value="Madison County">Madison County</option>
<option value="Marion County">Marion County</option>
<option value="McDuffie County">McDuffie County</option>
<option value="McIntosh County">McIntosh County</option>
<option value="Meriwether County">Meriwether County</option>
<option value="Miller County">Miller County</option>
<option value="Mitchell County">Mitchell County</option>
<option value="Monroe County">Monroe County</option>
<option value="Montgomery County">Montgomery County</option>
<option value="Morgan County">Morgan County</option>
<option value="Murray County">Murray County</option>
<option value="Muscogee County">Muscogee County</option>
<option value="Newton County">Newton County</option>
<option value="Oconee County">Oconee County</option>
<option value="Oglethorpe County">Oglethorpe County</option>
<option value="Paulding County">Paulding County</option>
<option value="Peach County">Peach County</option>
<option value="Pickens County">Pickens County</option>
<option value="Pierce County">Pierce County</option>
<option value="Pike County">Pike County</option>
<option value="Polk County">Polk County</option>
<option value="Pulaski County">Pulaski County</option>
<option value="Putnam County">Putnam County</option>
<option value="Quitman County">Quitman County</option>
<option value="Rabun County">Rabun County</option>
<option value="Randolph County">Randolph County</option>
<option value="Richmond County">Richmond County</option>
<option value="Rockdale County">Rockdale County</option>
<option value="Schley County">Schley County</option>
<option value="Screven County">Screven County</option>
<option value="Seminole County">Seminole County</option>
<option value="Spalding County">Spalding County</option>
<option value="Stephens County">Stephens County</option>
<option value="Stewart County">Stewart County</option>
<option value="Sumter County">Sumter County</option>
<option value="Talbot County">Talbot County</option>
<option value="Taliaferro County">Taliaferro County</option>
<option value="Tattnall County">Tattnall County</option>
<option value="Taylor County">Taylor County</option>
<option value="Telfair County">Telfair County</option>
<option value="Terrell County">Terrell County</option>
<option value="Thomas County">Thomas County</option>
<option value="Tift County">Tift County</option>
<option value="Toombs County">Toombs County</option>
<option value="Towns County">Towns County</option>
<option value="Treutlen County">Treutlen County</option>
<option value="Troup County">Troup County</option>
<option value="Turner County">Turner County</option>
<option value="Twiggs County">Twiggs County</option>
<option value="Union County">Union County</option>
<option value="Upson County">Upson County</option>
<option value="Walker County">Walker County</option>
<option value="Walton County">Walton County</option>
<option value="Ware County">Ware County</option>
<option value="Warren County">Warren County</option>
<option value="Washington County">Washington County</option>
<option value="Wayne County">Wayne County</option>
<option value="Webster County">Webster County</option>
<option value="Wheeler County">Wheeler County</option>
<option value="White County">White County</option>
<option value="Whitfield County">Whitfield County</option>
<option value="Wilcox County">Wilcox County</option>
<option value="Wilkes County">Wilkes County</option>
<option value="Wilkinson County">Wilkinson County</option>
<option value="Worth County">Worth County</option>
  </select>

  <div id="buttons">
  <button id="btn2010" onclick="updateChart(2010)">2010</button>
  <button id="btn2020" onclick="updateChart(2020)">2020</button>
</div>

  <div id="chart-container">
    <canvas id="raceChart"></canvas>
  </div>

   <script>
    let data = null;
    let chart = null;
    let currentYear = 2010;

    fetch("13.json")
      .then(res => res.json())
      .then(json => {
        data = json;
        document.getElementById("countySelect").addEventListener("change", () => updateChart(currentYear));
        updateChart(currentYear);
      });

    function updateChart(year) {
      currentYear = year;

      // Highlight selected button
      document.querySelectorAll("#buttons button").forEach(btn => btn.classList.remove("active"));
      const activeBtn = document.getElementById(`btn${year}`);
      if (activeBtn) activeBtn.classList.add("active");

      const county = document.getElementById("countySelect").value;
      const entry = data[county] && data[county][year];
      if (!entry) return;

      const races = Object.keys(entry[0]).filter(k => !["state_fips", "county", "year", "total"].includes(k));
      const values = races.map(r => entry[0][r]);

      const config = {
        type: "bar",
        data: {
          labels: races,
          datasets: [{
            label: "Population",
            data: values,
            backgroundColor: "dodgerblue"
          }]
        },
        options: {
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString();
                }
              }
            }
          }
        }
      };

      if (chart) {
        chart.destroy();
      }
      chart = new Chart(document.getElementById("raceChart"), config);
    }
  </script>
</body>
</html>
