<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Race by Year – Kansas</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 1em;
    }
    #buttons button {
      margin: 0 5px;
    }
    #chart-container {
      width: 90%;
      max-width: 800px;
      margin: auto;
    }
    
    #buttons button.active {
  background-color: dodgerblue;
  color: white;
  border: none;
  border-radius: 4px;
}

  </style>
</head>
<body>
  <h2>Race/Ethnicity Population – Kansas</h2>

  <label for="countySelect">County:</label>
  <select id="countySelect">
    <option value="Statewide" selected>Statewide</option>
<option value="Allen County">Allen County</option>
<option value="Anderson County">Anderson County</option>
<option value="Atchison County">Atchison County</option>
<option value="Barber County">Barber County</option>
<option value="Barton County">Barton County</option>
<option value="Bourbon County">Bourbon County</option>
<option value="Brown County">Brown County</option>
<option value="Butler County">Butler County</option>
<option value="Chase County">Chase County</option>
<option value="Chautauqua County">Chautauqua County</option>
<option value="Cherokee County">Cherokee County</option>
<option value="Cheyenne County">Cheyenne County</option>
<option value="Clark County">Clark County</option>
<option value="Clay County">Clay County</option>
<option value="Cloud County">Cloud County</option>
<option value="Coffey County">Coffey County</option>
<option value="Comanche County">Comanche County</option>
<option value="Cowley County">Cowley County</option>
<option value="Crawford County">Crawford County</option>
<option value="Decatur County">Decatur County</option>
<option value="Dickinson County">Dickinson County</option>
<option value="Doniphan County">Doniphan County</option>
<option value="Douglas County">Douglas County</option>
<option value="Edwards County">Edwards County</option>
<option value="Elk County">Elk County</option>
<option value="Ellis County">Ellis County</option>
<option value="Ellsworth County">Ellsworth County</option>
<option value="Finney County">Finney County</option>
<option value="Ford County">Ford County</option>
<option value="Franklin County">Franklin County</option>
<option value="Geary County">Geary County</option>
<option value="Gove County">Gove County</option>
<option value="Graham County">Graham County</option>
<option value="Grant County">Grant County</option>
<option value="Gray County">Gray County</option>
<option value="Greeley County">Greeley County</option>
<option value="Greenwood County">Greenwood County</option>
<option value="Hamilton County">Hamilton County</option>
<option value="Harper County">Harper County</option>
<option value="Harvey County">Harvey County</option>
<option value="Haskell County">Haskell County</option>
<option value="Hodgeman County">Hodgeman County</option>
<option value="Jackson County">Jackson County</option>
<option value="Jefferson County">Jefferson County</option>
<option value="Jewell County">Jewell County</option>
<option value="Johnson County">Johnson County</option>
<option value="Kearny County">Kearny County</option>
<option value="Kingman County">Kingman County</option>
<option value="Kiowa County">Kiowa County</option>
<option value="Labette County">Labette County</option>
<option value="Lane County">Lane County</option>
<option value="Leavenworth County">Leavenworth County</option>
<option value="Lincoln County">Lincoln County</option>
<option value="Linn County">Linn County</option>
<option value="Logan County">Logan County</option>
<option value="Lyon County">Lyon County</option>
<option value="Marion County">Marion County</option>
<option value="Marshall County">Marshall County</option>
<option value="McPherson County">McPherson County</option>
<option value="Meade County">Meade County</option>
<option value="Miami County">Miami County</option>
<option value="Mitchell County">Mitchell County</option>
<option value="Montgomery County">Montgomery County</option>
<option value="Morris County">Morris County</option>
<option value="Morton County">Morton County</option>
<option value="Nemaha County">Nemaha County</option>
<option value="Neosho County">Neosho County</option>
<option value="Ness County">Ness County</option>
<option value="Norton County">Norton County</option>
<option value="Osage County">Osage County</option>
<option value="Osborne County">Osborne County</option>
<option value="Ottawa County">Ottawa County</option>
<option value="Pawnee County">Pawnee County</option>
<option value="Phillips County">Phillips County</option>
<option value="Pottawatomie County">Pottawatomie County</option>
<option value="Pratt County">Pratt County</option>
<option value="Rawlins County">Rawlins County</option>
<option value="Reno County">Reno County</option>
<option value="Republic County">Republic County</option>
<option value="Rice County">Rice County</option>
<option value="Riley County">Riley County</option>
<option value="Rooks County">Rooks County</option>
<option value="Rush County">Rush County</option>
<option value="Russell County">Russell County</option>
<option value="Saline County">Saline County</option>
<option value="Scott County">Scott County</option>
<option value="Sedgwick County">Sedgwick County</option>
<option value="Seward County">Seward County</option>
<option value="Shawnee County">Shawnee County</option>
<option value="Sheridan County">Sheridan County</option>
<option value="Sherman County">Sherman County</option>
<option value="Smith County">Smith County</option>
<option value="Stafford County">Stafford County</option>
<option value="Stanton County">Stanton County</option>
<option value="Stevens County">Stevens County</option>
<option value="Sumner County">Sumner County</option>
<option value="Thomas County">Thomas County</option>
<option value="Trego County">Trego County</option>
<option value="Wabaunsee County">Wabaunsee County</option>
<option value="Wallace County">Wallace County</option>
<option value="Washington County">Washington County</option>
<option value="Wichita County">Wichita County</option>
<option value="Wilson County">Wilson County</option>
<option value="Woodson County">Woodson County</option>
<option value="Wyandotte County">Wyandotte County</option>
  </select>

  <div id="buttons">
  <button id="btn2010" onclick="updateChart(2010)">2010</button>
  <button id="btn2020" onclick="updateChart(2020)">2020</button>
</div>

  <div id="chart-container">
    <canvas id="raceChart"></canvas>
  </div>

   <script>
    let data = null;
    let chart = null;
    let currentYear = 2010;

    fetch("20.json")
      .then(res => res.json())
      .then(json => {
        data = json;
        document.getElementById("countySelect").addEventListener("change", () => updateChart(currentYear));
        updateChart(currentYear);
      });

    function updateChart(year) {
      currentYear = year;

      // Highlight selected button
      document.querySelectorAll("#buttons button").forEach(btn => btn.classList.remove("active"));
      const activeBtn = document.getElementById(`btn${year}`);
      if (activeBtn) activeBtn.classList.add("active");

      const county = document.getElementById("countySelect").value;
      const entry = data[county] && data[county][year];
      if (!entry) return;

      const races = Object.keys(entry[0]).filter(k => !["state_fips", "county", "year", "total"].includes(k));
      const values = races.map(r => entry[0][r]);

      const config = {
        type: "bar",
        data: {
          labels: races,
          datasets: [{
            label: "Population",
            data: values,
            backgroundColor: "dodgerblue"
          }]
        },
        options: {
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString();
                }
              }
            }
          }
        }
      };

      if (chart) {
        chart.destroy();
      }
      chart = new Chart(document.getElementById("raceChart"), config);
    }
  </script>
</body>
</html>
