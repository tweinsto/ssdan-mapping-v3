<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Race by Year – Texas</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 1em;
    }
    #buttons button {
      margin: 0 5px;
    }
    #chart-container {
      width: 90%;
      max-width: 800px;
      margin: auto;
    }
    
    #buttons button.active {
  background-color: dodgerblue;
  color: white;
  border: none;
  border-radius: 4px;
}

  </style>
</head>
<body>
  <h2>Race/Ethnicity Population – Texas</h2>

  <label for="countySelect">County:</label>
  <select id="countySelect">
    <option value="Statewide" selected>Statewide</option>
<option value="Anderson County">Anderson County</option>
<option value="Andrews County">Andrews County</option>
<option value="Angelina County">Angelina County</option>
<option value="Aransas County">Aransas County</option>
<option value="Archer County">Archer County</option>
<option value="Armstrong County">Armstrong County</option>
<option value="Atascosa County">Atascosa County</option>
<option value="Austin County">Austin County</option>
<option value="Bailey County">Bailey County</option>
<option value="Bandera County">Bandera County</option>
<option value="Bastrop County">Bastrop County</option>
<option value="Baylor County">Baylor County</option>
<option value="Bee County">Bee County</option>
<option value="Bell County">Bell County</option>
<option value="Bexar County">Bexar County</option>
<option value="Blanco County">Blanco County</option>
<option value="Borden County">Borden County</option>
<option value="Bosque County">Bosque County</option>
<option value="Bowie County">Bowie County</option>
<option value="Brazoria County">Brazoria County</option>
<option value="Brazos County">Brazos County</option>
<option value="Brewster County">Brewster County</option>
<option value="Briscoe County">Briscoe County</option>
<option value="Brooks County">Brooks County</option>
<option value="Brown County">Brown County</option>
<option value="Burleson County">Burleson County</option>
<option value="Burnet County">Burnet County</option>
<option value="Caldwell County">Caldwell County</option>
<option value="Calhoun County">Calhoun County</option>
<option value="Callahan County">Callahan County</option>
<option value="Cameron County">Cameron County</option>
<option value="Camp County">Camp County</option>
<option value="Carson County">Carson County</option>
<option value="Cass County">Cass County</option>
<option value="Castro County">Castro County</option>
<option value="Chambers County">Chambers County</option>
<option value="Cherokee County">Cherokee County</option>
<option value="Childress County">Childress County</option>
<option value="Clay County">Clay County</option>
<option value="Cochran County">Cochran County</option>
<option value="Coke County">Coke County</option>
<option value="Coleman County">Coleman County</option>
<option value="Collin County">Collin County</option>
<option value="Collingsworth County">Collingsworth County</option>
<option value="Colorado County">Colorado County</option>
<option value="Comal County">Comal County</option>
<option value="Comanche County">Comanche County</option>
<option value="Concho County">Concho County</option>
<option value="Cooke County">Cooke County</option>
<option value="Coryell County">Coryell County</option>
<option value="Cottle County">Cottle County</option>
<option value="Crane County">Crane County</option>
<option value="Crockett County">Crockett County</option>
<option value="Crosby County">Crosby County</option>
<option value="Culberson County">Culberson County</option>
<option value="Dallam County">Dallam County</option>
<option value="Dallas County">Dallas County</option>
<option value="Dawson County">Dawson County</option>
<option value="Deaf Smith County">Deaf Smith County</option>
<option value="Delta County">Delta County</option>
<option value="Denton County">Denton County</option>
<option value="DeWitt County">DeWitt County</option>
<option value="Dickens County">Dickens County</option>
<option value="Dimmit County">Dimmit County</option>
<option value="Donley County">Donley County</option>
<option value="Duval County">Duval County</option>
<option value="Eastland County">Eastland County</option>
<option value="Ector County">Ector County</option>
<option value="Edwards County">Edwards County</option>
<option value="El Paso County">El Paso County</option>
<option value="Ellis County">Ellis County</option>
<option value="Erath County">Erath County</option>
<option value="Falls County">Falls County</option>
<option value="Fannin County">Fannin County</option>
<option value="Fayette County">Fayette County</option>
<option value="Fisher County">Fisher County</option>
<option value="Floyd County">Floyd County</option>
<option value="Foard County">Foard County</option>
<option value="Fort Bend County">Fort Bend County</option>
<option value="Franklin County">Franklin County</option>
<option value="Freestone County">Freestone County</option>
<option value="Frio County">Frio County</option>
<option value="Gaines County">Gaines County</option>
<option value="Galveston County">Galveston County</option>
<option value="Garza County">Garza County</option>
<option value="Gillespie County">Gillespie County</option>
<option value="Glasscock County">Glasscock County</option>
<option value="Goliad County">Goliad County</option>
<option value="Gonzales County">Gonzales County</option>
<option value="Gray County">Gray County</option>
<option value="Grayson County">Grayson County</option>
<option value="Gregg County">Gregg County</option>
<option value="Grimes County">Grimes County</option>
<option value="Guadalupe County">Guadalupe County</option>
<option value="Hale County">Hale County</option>
<option value="Hall County">Hall County</option>
<option value="Hamilton County">Hamilton County</option>
<option value="Hansford County">Hansford County</option>
<option value="Hardeman County">Hardeman County</option>
<option value="Hardin County">Hardin County</option>
<option value="Harris County">Harris County</option>
<option value="Harrison County">Harrison County</option>
<option value="Hartley County">Hartley County</option>
<option value="Haskell County">Haskell County</option>
<option value="Hays County">Hays County</option>
<option value="Hemphill County">Hemphill County</option>
<option value="Henderson County">Henderson County</option>
<option value="Hidalgo County">Hidalgo County</option>
<option value="Hill County">Hill County</option>
<option value="Hockley County">Hockley County</option>
<option value="Hood County">Hood County</option>
<option value="Hopkins County">Hopkins County</option>
<option value="Houston County">Houston County</option>
<option value="Howard County">Howard County</option>
<option value="Hudspeth County">Hudspeth County</option>
<option value="Hunt County">Hunt County</option>
<option value="Hutchinson County">Hutchinson County</option>
<option value="Irion County">Irion County</option>
<option value="Jack County">Jack County</option>
<option value="Jackson County">Jackson County</option>
<option value="Jasper County">Jasper County</option>
<option value="Jeff Davis County">Jeff Davis County</option>
<option value="Jefferson County">Jefferson County</option>
<option value="Jim Hogg County">Jim Hogg County</option>
<option value="Jim Wells County">Jim Wells County</option>
<option value="Johnson County">Johnson County</option>
<option value="Jones County">Jones County</option>
<option value="Karnes County">Karnes County</option>
<option value="Kaufman County">Kaufman County</option>
<option value="Kendall County">Kendall County</option>
<option value="Kenedy County">Kenedy County</option>
<option value="Kent County">Kent County</option>
<option value="Kerr County">Kerr County</option>
<option value="Kimble County">Kimble County</option>
<option value="King County">King County</option>
<option value="Kinney County">Kinney County</option>
<option value="Kleberg County">Kleberg County</option>
<option value="Knox County">Knox County</option>
<option value="La Salle County">La Salle County</option>
<option value="Lamar County">Lamar County</option>
<option value="Lamb County">Lamb County</option>
<option value="Lampasas County">Lampasas County</option>
<option value="Lavaca County">Lavaca County</option>
<option value="Lee County">Lee County</option>
<option value="Leon County">Leon County</option>
<option value="Liberty County">Liberty County</option>
<option value="Limestone County">Limestone County</option>
<option value="Lipscomb County">Lipscomb County</option>
<option value="Live Oak County">Live Oak County</option>
<option value="Llano County">Llano County</option>
<option value="Loving County">Loving County</option>
<option value="Lubbock County">Lubbock County</option>
<option value="Lynn County">Lynn County</option>
<option value="Madison County">Madison County</option>
<option value="Marion County">Marion County</option>
<option value="Martin County">Martin County</option>
<option value="Mason County">Mason County</option>
<option value="Matagorda County">Matagorda County</option>
<option value="Maverick County">Maverick County</option>
<option value="McCulloch County">McCulloch County</option>
<option value="McLennan County">McLennan County</option>
<option value="McMullen County">McMullen County</option>
<option value="Medina County">Medina County</option>
<option value="Menard County">Menard County</option>
<option value="Midland County">Midland County</option>
<option value="Milam County">Milam County</option>
<option value="Mills County">Mills County</option>
<option value="Mitchell County">Mitchell County</option>
<option value="Montague County">Montague County</option>
<option value="Montgomery County">Montgomery County</option>
<option value="Moore County">Moore County</option>
<option value="Morris County">Morris County</option>
<option value="Motley County">Motley County</option>
<option value="Nacogdoches County">Nacogdoches County</option>
<option value="Navarro County">Navarro County</option>
<option value="Newton County">Newton County</option>
<option value="Nolan County">Nolan County</option>
<option value="Nueces County">Nueces County</option>
<option value="Ochiltree County">Ochiltree County</option>
<option value="Oldham County">Oldham County</option>
<option value="Orange County">Orange County</option>
<option value="Palo Pinto County">Palo Pinto County</option>
<option value="Panola County">Panola County</option>
<option value="Parker County">Parker County</option>
<option value="Parmer County">Parmer County</option>
<option value="Pecos County">Pecos County</option>
<option value="Polk County">Polk County</option>
<option value="Potter County">Potter County</option>
<option value="Presidio County">Presidio County</option>
<option value="Rains County">Rains County</option>
<option value="Randall County">Randall County</option>
<option value="Reagan County">Reagan County</option>
<option value="Real County">Real County</option>
<option value="Red River County">Red River County</option>
<option value="Reeves County">Reeves County</option>
<option value="Refugio County">Refugio County</option>
<option value="Roberts County">Roberts County</option>
<option value="Robertson County">Robertson County</option>
<option value="Rockwall County">Rockwall County</option>
<option value="Runnels County">Runnels County</option>
<option value="Rusk County">Rusk County</option>
<option value="Sabine County">Sabine County</option>
<option value="San Augustine County">San Augustine County</option>
<option value="San Jacinto County">San Jacinto County</option>
<option value="San Patricio County">San Patricio County</option>
<option value="San Saba County">San Saba County</option>
<option value="Schleicher County">Schleicher County</option>
<option value="Scurry County">Scurry County</option>
<option value="Shackelford County">Shackelford County</option>
<option value="Shelby County">Shelby County</option>
<option value="Sherman County">Sherman County</option>
<option value="Smith County">Smith County</option>
<option value="Somervell County">Somervell County</option>
<option value="Starr County">Starr County</option>
<option value="Stephens County">Stephens County</option>
<option value="Sterling County">Sterling County</option>
<option value="Stonewall County">Stonewall County</option>
<option value="Sutton County">Sutton County</option>
<option value="Swisher County">Swisher County</option>
<option value="Tarrant County">Tarrant County</option>
<option value="Taylor County">Taylor County</option>
<option value="Terrell County">Terrell County</option>
<option value="Terry County">Terry County</option>
<option value="Throckmorton County">Throckmorton County</option>
<option value="Titus County">Titus County</option>
<option value="Tom Green County">Tom Green County</option>
<option value="Travis County">Travis County</option>
<option value="Trinity County">Trinity County</option>
<option value="Tyler County">Tyler County</option>
<option value="Upshur County">Upshur County</option>
<option value="Upton County">Upton County</option>
<option value="Uvalde County">Uvalde County</option>
<option value="Val Verde County">Val Verde County</option>
<option value="Van Zandt County">Van Zandt County</option>
<option value="Victoria County">Victoria County</option>
<option value="Walker County">Walker County</option>
<option value="Waller County">Waller County</option>
<option value="Ward County">Ward County</option>
<option value="Washington County">Washington County</option>
<option value="Webb County">Webb County</option>
<option value="Wharton County">Wharton County</option>
<option value="Wheeler County">Wheeler County</option>
<option value="Wichita County">Wichita County</option>
<option value="Wilbarger County">Wilbarger County</option>
<option value="Willacy County">Willacy County</option>
<option value="Williamson County">Williamson County</option>
<option value="Wilson County">Wilson County</option>
<option value="Winkler County">Winkler County</option>
<option value="Wise County">Wise County</option>
<option value="Wood County">Wood County</option>
<option value="Yoakum County">Yoakum County</option>
<option value="Young County">Young County</option>
<option value="Zapata County">Zapata County</option>
<option value="Zavala County">Zavala County</option>
  </select>

  <div id="buttons">
  <button id="btn2010" onclick="updateChart(2010)">2010</button>
  <button id="btn2020" onclick="updateChart(2020)">2020</button>
</div>

  <div id="chart-container">
    <canvas id="raceChart"></canvas>
  </div>

   <script>
    let data = null;
    let chart = null;
    let currentYear = 2010;

    fetch("48.json")
      .then(res => res.json())
      .then(json => {
        data = json;
        document.getElementById("countySelect").addEventListener("change", () => updateChart(currentYear));
        updateChart(currentYear);
      });

    function updateChart(year) {
      currentYear = year;

      // Highlight selected button
      document.querySelectorAll("#buttons button").forEach(btn => btn.classList.remove("active"));
      const activeBtn = document.getElementById(`btn${year}`);
      if (activeBtn) activeBtn.classList.add("active");

      const county = document.getElementById("countySelect").value;
      const entry = data[county] && data[county][year];
      if (!entry) return;

      const races = Object.keys(entry[0]).filter(k => !["state_fips", "county", "year", "total"].includes(k));
      const values = races.map(r => entry[0][r]);

      const config = {
        type: "bar",
        data: {
          labels: races,
          datasets: [{
            label: "Population",
            data: values,
            backgroundColor: "dodgerblue"
          }]
        },
        options: {
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString();
                }
              }
            }
          }
        }
      };

      if (chart) {
        chart.destroy();
      }
      chart = new Chart(document.getElementById("raceChart"), config);
    }
  </script>
</body>
</html>
