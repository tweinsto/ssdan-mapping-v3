<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>


</head>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Industry Composition â€“ 33</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #fff;
    }
    .container {
      width: 95%;
      max-width: 1200px;
      margin: auto;
      text-align: center;
    }
    canvas {
  max-width: 100%;
}
    #countySelect {
      font-size: 1rem;
      padding: 0.5rem;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Industry Composition (Percent)</h2>
    <select id="countySelect"></select>
    <canvas id="pieChart"></canvas>
  </div>

  <script>
    const data = {"Statewide":{"Agriculture & mining":0.7,"Arts & food services":7.8,"Construction":7.1,"Education & health":24.4,"Finance & real estate":6.5,"Information":2,"Manufacturing":12.8,"Other services":4.2,"Prof. & waste services":12.1,"Public administration":4,"Retail trade":11.9,"Transport & utilities":4,"Wholesale trade":2.4},"Belknap County":{"Agriculture & mining":0.5,"Arts & food services":10,"Construction":8.5,"Education & health":24.3,"Finance & real estate":7,"Information":1.6,"Manufacturing":10.6,"Other services":5.2,"Prof. & waste services":9.5,"Public administration":5.1,"Retail trade":12,"Transport & utilities":3.5,"Wholesale trade":2.2},"Carroll County":{"Agriculture & mining":1.2,"Arts & food services":10.9,"Construction":11,"Education & health":25.6,"Finance & real estate":4.5,"Information":2.2,"Manufacturing":9,"Other services":5.6,"Prof. & waste services":11.5,"Public administration":2.8,"Retail trade":12,"Transport & utilities":3.1,"Wholesale trade":0.8},"Cheshire County":{"Agriculture & mining":1.3,"Arts & food services":6.1,"Construction":7.5,"Education & health":26.6,"Finance & real estate":5.8,"Information":1.7,"Manufacturing":14.1,"Other services":3.7,"Prof. & waste services":7.1,"Public administration":3.9,"Retail trade":13.5,"Transport & utilities":4.4,"Wholesale trade":4.5},"Coos County":{"Agriculture & mining":1.7,"Arts & food services":10.6,"Construction":10.1,"Education & health":24.3,"Finance & real estate":4.3,"Information":1,"Manufacturing":9.6,"Other services":5.4,"Prof. & waste services":7.4,"Public administration":6.9,"Retail trade":13,"Transport & utilities":4.5,"Wholesale trade":1},"Grafton County":{"Agriculture & mining":1.6,"Arts & food services":10,"Construction":5.8,"Education & health":34.1,"Finance & real estate":3.8,"Information":1.6,"Manufacturing":9.5,"Other services":4.8,"Prof. & waste services":11.3,"Public administration":3.4,"Retail trade":9.4,"Transport & utilities":3.2,"Wholesale trade":1.6},"Hillsborough County":{"Agriculture & mining":0.4,"Arts & food services":6.8,"Construction":7.3,"Education & health":22.9,"Finance & real estate":6.6,"Information":2.2,"Manufacturing":14.5,"Other services":3.9,"Prof. & waste services":13.4,"Public administration":2.9,"Retail trade":12.3,"Transport & utilities":4.5,"Wholesale trade":2.2},"Merrimack County":{"Agriculture & mining":1,"Arts & food services":7.5,"Construction":7.6,"Education & health":24.8,"Finance & real estate":5.4,"Information":2.2,"Manufacturing":9.8,"Other services":5,"Prof. & waste services":11.2,"Public administration":6.8,"Retail trade":12.2,"Transport & utilities":3.3,"Wholesale trade":3.2},"Rockingham County":{"Agriculture & mining":0.4,"Arts & food services":7.7,"Construction":7,"Education & health":23.1,"Finance & real estate":8.1,"Information":2,"Manufacturing":12.7,"Other services":3.6,"Prof. & waste services":13.7,"Public administration":4,"Retail trade":10.9,"Transport & utilities":4.2,"Wholesale trade":2.6},"Strafford County":{"Agriculture & mining":1,"Arts & food services":9.4,"Construction":4.8,"Education & health":23.4,"Finance & real estate":7.1,"Information":1.3,"Manufacturing":14.7,"Other services":4.7,"Prof. & waste services":11.5,"Public administration":4.7,"Retail trade":12.3,"Transport & utilities":3.7,"Wholesale trade":1.4},"Sullivan County":{"Agriculture & mining":1.4,"Arts & food services":6.3,"Construction":6.3,"Education & health":28.7,"Finance & real estate":4.4,"Information":3,"Manufacturing":14,"Other services":3.6,"Prof. & waste services":8.6,"Public administration":2.4,"Retail trade":15.3,"Transport & utilities":3.2,"Wholesale trade":2.7}};
    const colors = {
  'Agriculture & mining': '#FFFF01',
  'Arts & food services': '#00008B',
  'Construction': '#7570B1',
  'Education & health': '#66A61E',
  'Finance & real estate': '#E6AB01',
  'Information': '#379',
  'Manufacturing': '#E41A1C',
  'Other services': '#377EF1',
  'Prof. & waste services': '#FF7F00',
  'Public administration': '#1B9E77',
  'Retail trade': '#A65011',
  'Transport & utilities': '#F781BF',
  'Wholesale trade': '#919'
};

    const ctx = document.getElementById("pieChart").getContext("2d");
    let chart;

    function renderChart(county) {
      const values = data[county];
      const labels = Object.keys(values);
      const percentages = Object.values(values);

      if (chart) chart.destroy();

      chart = new Chart(ctx, {
        type: "pie",
        data: {
          labels: labels,
          datasets: [{
            data: percentages,
            backgroundColor: labels.map(label => colors[label] || "#cccccc")
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
  aspectRatio: 1.5, // You can tweak this (e.g., 1.3, 1.5, 2)
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.label + ": " + context.formattedValue + "%";
                }
              }
            },
            legend: {
              position: "right",
              labels: {
                usePointStyle: true,
                pointStyle: "rect"
              }
            }
          }
        }
      });
    }

    const select = document.getElementById("countySelect");
    Object.keys(data).forEach(county => {
      const opt = document.createElement("option");
      opt.value = county;
      opt.text = county;
      select.appendChild(opt);
    });
    select.value = "Statewide";
    select.addEventListener("change", () => renderChart(select.value));
    renderChart("Statewide");
  </script>
</body>
</html>
</html>
