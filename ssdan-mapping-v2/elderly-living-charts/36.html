<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>

  <meta charset="UTF-8"/>
  <title>Living Arrangements â€“ New York</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body { font-family: sans-serif; margin: 1rem 2rem; text-align: center; }
        h2 { margin-bottom: 0.25rem; font-size: 1.6rem; }
        select { padding: 0.4rem; font-size: 1rem; margin: 1rem 0; }
        canvas { width: 100%; max-width: 850px; height: 500px; }
      </style>
</head>
<html>
  <body>
    <h2>Living Arrangements of Adults 65+ in New York</h2>
    <label>Select County:</label>
    <select id="countySelect">
      <option value="Statewide">Statewide</option>
      <option value="Albany County, New York">Albany County, New York</option>
      <option value="Allegany County, New York">Allegany County, New York</option>
      <option value="Bronx County, New York">Bronx County, New York</option>
      <option value="Broome County, New York">Broome County, New York</option>
      <option value="Cattaraugus County, New York">Cattaraugus County, New York</option>
      <option value="Cayuga County, New York">Cayuga County, New York</option>
      <option value="Chautauqua County, New York">Chautauqua County, New York</option>
      <option value="Chemung County, New York">Chemung County, New York</option>
      <option value="Chenango County, New York">Chenango County, New York</option>
      <option value="Clinton County, New York">Clinton County, New York</option>
      <option value="Columbia County, New York">Columbia County, New York</option>
      <option value="Cortland County, New York">Cortland County, New York</option>
      <option value="Delaware County, New York">Delaware County, New York</option>
      <option value="Dutchess County, New York">Dutchess County, New York</option>
      <option value="Erie County, New York">Erie County, New York</option>
      <option value="Essex County, New York">Essex County, New York</option>
      <option value="Franklin County, New York">Franklin County, New York</option>
      <option value="Fulton County, New York">Fulton County, New York</option>
      <option value="Genesee County, New York">Genesee County, New York</option>
      <option value="Greene County, New York">Greene County, New York</option>
      <option value="Hamilton County, New York">Hamilton County, New York</option>
      <option value="Herkimer County, New York">Herkimer County, New York</option>
      <option value="Jefferson County, New York">Jefferson County, New York</option>
      <option value="Kings County, New York">Kings County, New York</option>
      <option value="Lewis County, New York">Lewis County, New York</option>
      <option value="Livingston County, New York">Livingston County, New York</option>
      <option value="Madison County, New York">Madison County, New York</option>
      <option value="Monroe County, New York">Monroe County, New York</option>
      <option value="Montgomery County, New York">Montgomery County, New York</option>
      <option value="Nassau County, New York">Nassau County, New York</option>
      <option value="New York County, New York">New York County, New York</option>
      <option value="Niagara County, New York">Niagara County, New York</option>
      <option value="Oneida County, New York">Oneida County, New York</option>
      <option value="Onondaga County, New York">Onondaga County, New York</option>
      <option value="Ontario County, New York">Ontario County, New York</option>
      <option value="Orange County, New York">Orange County, New York</option>
      <option value="Orleans County, New York">Orleans County, New York</option>
      <option value="Oswego County, New York">Oswego County, New York</option>
      <option value="Otsego County, New York">Otsego County, New York</option>
      <option value="Putnam County, New York">Putnam County, New York</option>
      <option value="Queens County, New York">Queens County, New York</option>
      <option value="Rensselaer County, New York">Rensselaer County, New York</option>
      <option value="Richmond County, New York">Richmond County, New York</option>
      <option value="Rockland County, New York">Rockland County, New York</option>
      <option value="Saratoga County, New York">Saratoga County, New York</option>
      <option value="Schenectady County, New York">Schenectady County, New York</option>
      <option value="Schoharie County, New York">Schoharie County, New York</option>
      <option value="Schuyler County, New York">Schuyler County, New York</option>
      <option value="Seneca County, New York">Seneca County, New York</option>
      <option value="St. Lawrence County, New York">St. Lawrence County, New York</option>
      <option value="Steuben County, New York">Steuben County, New York</option>
      <option value="Suffolk County, New York">Suffolk County, New York</option>
      <option value="Sullivan County, New York">Sullivan County, New York</option>
      <option value="Tioga County, New York">Tioga County, New York</option>
      <option value="Tompkins County, New York">Tompkins County, New York</option>
      <option value="Ulster County, New York">Ulster County, New York</option>
      <option value="Warren County, New York">Warren County, New York</option>
      <option value="Washington County, New York">Washington County, New York</option>
      <option value="Wayne County, New York">Wayne County, New York</option>
      <option value="Westchester County, New York">Westchester County, New York</option>
      <option value="Wyoming County, New York">Wyoming County, New York</option>
      <option value="Yates County, New York">Yates County, New York</option>
    </select>
    <canvas id="barChart"></canvas>
    <script>  const data = {"Statewide":[29.4,0.3,2.5,17.4,47.7,2.7],"Albany County, New York":[33.4,0.2,2,11.1,49.9,3.4],"Allegany County, New York":[28.2,0.1,3.7,7.5,58,2.4],"Bronx County, New York":[36.7,0.4,2.9,27.4,29.8,2.8],"Broome County, New York":[32.1,0.2,1.8,7.6,55.3,3.1],"Cattaraugus County, New York":[30.4,0.2,1.9,9.2,55.2,3.1],"Cayuga County, New York":[32.5,0.5,1.5,9.9,52.7,2.8],"Chautauqua County, New York":[32.7,0.5,1.3,8.3,54.2,3],"Chemung County, New York":[34.3,0.4,2.1,11,49.9,2.3],"Chenango County, New York":[30.6,0.1,2,9.2,54.8,3.3],"Clinton County, New York":[29.4,0.1,0.7,6.9,59,3.9],"Columbia County, New York":[27.3,0.1,2.1,8.6,58.4,3.5],"Cortland County, New York":[30.8,0.1,1.4,9.7,53.7,4.3],"Delaware County, New York":[29.8,0.4,2.8,10.5,53.3,3.2],"Dutchess County, New York":[29.9,0.3,2.3,10.9,53.6,3.1],"Erie County, New York":[34.7,0.4,1.8,11.7,48.7,2.7],"Essex County, New York":[28,0.5,2.1,8.1,58.1,3.2],"Franklin County, New York":[32.5,0.1,0.5,7.5,56.7,2.7],"Fulton County, New York":[29.9,0.3,0.9,11.1,51.1,6.7],"Genesee County, New York":[30.6,0.3,1.2,9.1,55.6,3.2],"Greene County, New York":[28.9,0.6,3.3,13.1,50.9,3.2],"Hamilton County, New York":[17.8,0.1,13.9,6.7,60.5,1],"Herkimer County, New York":[33.2,0.2,1.3,5.7,56.7,3],"Jefferson County, New York":[28.2,0,1.5,9.3,57.2,3.8],"Kings County, New York":[28.3,0.3,3.6,25.4,40.3,2.1],"Lewis County, New York":[27.4,0.2,1,7.1,57.6,6.7],"Livingston County, New York":[28.2,0.3,1.6,8.8,58.2,2.9],"Madison County, New York":[29.3,0.2,1.4,9.1,55.5,4.5],"Monroe County, New York":[32.2,0.3,2,10.8,51.6,3.3],"Montgomery County, New York":[36.6,0,4.3,11.6,44.9,2.6],"Nassau County, New York":[20.7,0.3,2.2,19.5,55.5,1.9],"New York County, New York":[42.3,0.3,2.8,16.5,35.9,2.3],"Niagara County, New York":[33.1,0.3,1.7,9.3,52.3,3.3],"Oneida County, New York":[32.9,0.2,1.1,9.6,53.5,2.7],"Onondaga County, New York":[33.4,0.2,1.9,10.9,50.6,2.9],"Ontario County, New York":[29.2,0,1.4,7.8,56.9,4.6],"Orange County, New York":[28.4,0.2,1.3,15.5,50.8,3.9],"Orleans County, New York":[32.4,0.2,1.8,8.9,55,1.8],"Oswego County, New York":[30.4,0.1,1.6,9.6,53.5,4.8],"Otsego County, New York":[27.4,0.4,2.4,8.9,57.7,3.2],"Putnam County, New York":[21.4,0.1,1.7,18.7,56.1,1.9],"Queens County, New York":[22.7,0.3,3.5,28.4,43.3,1.9],"Rensselaer County, New York":[30.5,0,2.8,11.9,49.8,4.9],"Richmond County, New York":[22.9,0.2,2.4,22.6,49.7,2.2],"Rockland County, New York":[25.3,0.4,1.7,17,54,1.6],"Saratoga County, New York":[27.7,0.1,1.6,9,57.8,3.7],"Schenectady County, New York":[33.6,0.2,1.8,11.1,49.7,3.7],"Schoharie County, New York":[30.9,0,2.5,7.6,56,2.9],"Schuyler County, New York":[29.1,0.4,3.5,3.8,60.1,3.1],"Seneca County, New York":[36.7,0.3,2.4,5.7,52.2,2.7],"St. Lawrence County, New York":[33.5,0.4,2.1,7.6,53.4,3.1],"Steuben County, New York":[31.6,0.4,1.7,8.7,54.5,3],"Suffolk County, New York":[23.5,0.3,2.4,16.7,54.1,3],"Sullivan County, New York":[34.7,0,1.6,14,45.5,4.2],"Tioga County, New York":[28,0.2,1,8.4,59.2,3.2],"Tompkins County, New York":[29,0.1,2.4,5.6,57.7,5.3],"Ulster County, New York":[30.7,0.3,3.1,10.5,51.5,3.8],"Warren County, New York":[30.5,0.1,2.8,6.6,55.9,4.1],"Washington County, New York":[28.8,0.4,1.7,8.5,56.9,3.8],"Wayne County, New York":[28.5,0.3,2.1,7.4,57.2,4.7],"Westchester County, New York":[28.1,0.3,1.8,14.7,52,3],"Wyoming County, New York":[28.4,0.1,1.2,6.4,61.9,1.9],"Yates County, New York":[26,0.1,4.4,8,57.7,3.9]};
  const nationalAvg = [27.3,0.3,2.3,14.5,53.2,2.4];
  const categories = ["Lives alone","With child","With nonrelatives","With other relatives","With spouse only","With unmarried partner"];
  const ctx = document.getElementById("barChart").getContext("2d");
  let chart;

  function renderChart(values) {
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: categories,
        datasets: [
          {
            label: "County/State",
            data: values,
            backgroundColor: [
              "#e41a1c", "#ff7f00", "#4daf4a",
              "#984ea3", "#377eb8", "#a65628"
            ]
          },
          {
            label: "",
            data: categories.map(c => nationalAvg[c]),
            type: "line",
            borderColor: "gray",
            borderWidth: 1,
            borderDash: [4, 4],
            pointRadius: 0,
            fill: false
          }
        ]
      },
      options: {
        indexAxis: "y",
        scales: {
          x: {
            min: 0,
            max: 100,
            ticks: {
              callback: function(v) { return v + "%"; }
            }
          }
        },
        plugins: {
          legend: {
            labels: {
              filter: function(item) { return item.text !== ""; }
            }
          },
          tooltip: {
            callbacks: {
              label: function(ctx) {
                return ctx.dataset.label !== "" ? ctx.dataset.label + ": " + ctx.raw + "%" : null;
              }
            }
          }
        }
      }
    });
  }

  document.getElementById("countySelect").addEventListener("change", function() {
    renderChart(Object.values(data[this.value]));
  });

  renderChart(Object.values(data["Statewide"]));</script>
  </body>
</html>
</html>
