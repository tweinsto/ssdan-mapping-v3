<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>

  <meta charset="UTF-8"/>
  <title>Living Arrangements â€“ South Dakota</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body { font-family: sans-serif; margin: 1rem 2rem; text-align: center; }
        h2 { margin-bottom: 0.25rem; font-size: 1.6rem; }
        select { padding: 0.4rem; font-size: 1rem; margin: 1rem 0; }
        canvas { width: 100%; max-width: 850px; height: 500px; }
      </style>
</head>
<html>
  <body>
    <h2>Living Arrangements of Adults 65+ in South Dakota</h2>
    <label>Select County:</label>
    <select id="countySelect">
      <option value="Statewide">Statewide</option>
      <option value="Aurora County, South Dakota">Aurora County, South Dakota</option>
      <option value="Beadle County, South Dakota">Beadle County, South Dakota</option>
      <option value="Bennett County, South Dakota">Bennett County, South Dakota</option>
      <option value="Bon Homme County, South Dakota">Bon Homme County, South Dakota</option>
      <option value="Brookings County, South Dakota">Brookings County, South Dakota</option>
      <option value="Brown County, South Dakota">Brown County, South Dakota</option>
      <option value="Brule County, South Dakota">Brule County, South Dakota</option>
      <option value="Buffalo County, South Dakota">Buffalo County, South Dakota</option>
      <option value="Butte County, South Dakota">Butte County, South Dakota</option>
      <option value="Campbell County, South Dakota">Campbell County, South Dakota</option>
      <option value="Charles Mix County, South Dakota">Charles Mix County, South Dakota</option>
      <option value="Clark County, South Dakota">Clark County, South Dakota</option>
      <option value="Clay County, South Dakota">Clay County, South Dakota</option>
      <option value="Codington County, South Dakota">Codington County, South Dakota</option>
      <option value="Corson County, South Dakota">Corson County, South Dakota</option>
      <option value="Custer County, South Dakota">Custer County, South Dakota</option>
      <option value="Davison County, South Dakota">Davison County, South Dakota</option>
      <option value="Day County, South Dakota">Day County, South Dakota</option>
      <option value="Deuel County, South Dakota">Deuel County, South Dakota</option>
      <option value="Dewey County, South Dakota">Dewey County, South Dakota</option>
      <option value="Douglas County, South Dakota">Douglas County, South Dakota</option>
      <option value="Edmunds County, South Dakota">Edmunds County, South Dakota</option>
      <option value="Fall River County, South Dakota">Fall River County, South Dakota</option>
      <option value="Faulk County, South Dakota">Faulk County, South Dakota</option>
      <option value="Grant County, South Dakota">Grant County, South Dakota</option>
      <option value="Gregory County, South Dakota">Gregory County, South Dakota</option>
      <option value="Haakon County, South Dakota">Haakon County, South Dakota</option>
      <option value="Hamlin County, South Dakota">Hamlin County, South Dakota</option>
      <option value="Hand County, South Dakota">Hand County, South Dakota</option>
      <option value="Hanson County, South Dakota">Hanson County, South Dakota</option>
      <option value="Harding County, South Dakota">Harding County, South Dakota</option>
      <option value="Hughes County, South Dakota">Hughes County, South Dakota</option>
      <option value="Hutchinson County, South Dakota">Hutchinson County, South Dakota</option>
      <option value="Hyde County, South Dakota">Hyde County, South Dakota</option>
      <option value="Jackson County, South Dakota">Jackson County, South Dakota</option>
      <option value="Jerauld County, South Dakota">Jerauld County, South Dakota</option>
      <option value="Jones County, South Dakota">Jones County, South Dakota</option>
      <option value="Kingsbury County, South Dakota">Kingsbury County, South Dakota</option>
      <option value="Lake County, South Dakota">Lake County, South Dakota</option>
      <option value="Lawrence County, South Dakota">Lawrence County, South Dakota</option>
      <option value="Lincoln County, South Dakota">Lincoln County, South Dakota</option>
      <option value="Lyman County, South Dakota">Lyman County, South Dakota</option>
      <option value="Marshall County, South Dakota">Marshall County, South Dakota</option>
      <option value="McCook County, South Dakota">McCook County, South Dakota</option>
      <option value="McPherson County, South Dakota">McPherson County, South Dakota</option>
      <option value="Meade County, South Dakota">Meade County, South Dakota</option>
      <option value="Mellette County, South Dakota">Mellette County, South Dakota</option>
      <option value="Miner County, South Dakota">Miner County, South Dakota</option>
      <option value="Minnehaha County, South Dakota">Minnehaha County, South Dakota</option>
      <option value="Moody County, South Dakota">Moody County, South Dakota</option>
      <option value="Oglala Lakota County, South Dakota">Oglala Lakota County, South Dakota</option>
      <option value="Pennington County, South Dakota">Pennington County, South Dakota</option>
      <option value="Perkins County, South Dakota">Perkins County, South Dakota</option>
      <option value="Potter County, South Dakota">Potter County, South Dakota</option>
      <option value="Roberts County, South Dakota">Roberts County, South Dakota</option>
      <option value="Sanborn County, South Dakota">Sanborn County, South Dakota</option>
      <option value="Spink County, South Dakota">Spink County, South Dakota</option>
      <option value="Stanley County, South Dakota">Stanley County, South Dakota</option>
      <option value="Sully County, South Dakota">Sully County, South Dakota</option>
      <option value="Todd County, South Dakota">Todd County, South Dakota</option>
      <option value="Tripp County, South Dakota">Tripp County, South Dakota</option>
      <option value="Turner County, South Dakota">Turner County, South Dakota</option>
      <option value="Union County, South Dakota">Union County, South Dakota</option>
      <option value="Walworth County, South Dakota">Walworth County, South Dakota</option>
      <option value="Yankton County, South Dakota">Yankton County, South Dakota</option>
      <option value="Ziebach County, South Dakota">Ziebach County, South Dakota</option>
    </select>
    <canvas id="barChart"></canvas>
    <script>  const data = {"Statewide":[30.4,0.3,1.4,7.5,58,2.4],"Aurora County, South Dakota":[33.2,0,0.4,3,63.4,0],"Beadle County, South Dakota":[31.8,0.8,0,9.8,56.5,1.1],"Bennett County, South Dakota":[20.5,0,0,14,56.8,8.8],"Bon Homme County, South Dakota":[31.1,0.1,0.2,3.6,63.1,2.1],"Brookings County, South Dakota":[32.2,0.1,0.1,3,64.1,0.5],"Brown County, South Dakota":[36.8,0,1.4,5.1,52.1,4.6],"Brule County, South Dakota":[41.8,0,0.1,7.6,49.6,0.9],"Buffalo County, South Dakota":[24.4,0,0,32.3,40.2,3],"Butte County, South Dakota":[30.2,0,1.4,5.9,61.1,1.4],"Campbell County, South Dakota":[27.4,0,2.1,0.2,65,5.2],"Charles Mix County, South Dakota":[26.1,0,1,11.9,59.3,1.7],"Clark County, South Dakota":[26.5,0,7.7,7.3,57.1,1.3],"Clay County, South Dakota":[31.3,0.6,0.6,2.6,64,0.9],"Codington County, South Dakota":[34.9,0.3,1.5,10.1,50.3,2.9],"Corson County, South Dakota":[18.3,0.6,0.8,29,49.9,1.4],"Custer County, South Dakota":[24.4,0.1,0.2,3.1,71.4,0.7],"Davison County, South Dakota":[40.7,0,0.3,8.1,50.5,0.4],"Day County, South Dakota":[32.6,0.4,2.2,8.9,52.9,2.9],"Deuel County, South Dakota":[30.3,0.1,2.1,3.5,63.2,0.8],"Dewey County, South Dakota":[27.2,0.4,0.2,22,46.3,3.9],"Douglas County, South Dakota":[26.3,0,0,3.9,69.6,0.2],"Edmunds County, South Dakota":[25.2,0,0.5,4.8,65.2,4.3],"Fall River County, South Dakota":[29.4,0.3,3.2,7.1,58.3,1.6],"Faulk County, South Dakota":[41.1,0,0,2.3,55.2,1.4],"Grant County, South Dakota":[29.9,0,1.2,2.7,65.6,0.6],"Gregory County, South Dakota":[28.8,0,1.3,8.5,58.5,2.9],"Haakon County, South Dakota":[18.4,0,0,2.4,77.2,2],"Hamlin County, South Dakota":[19.7,0,0.4,3.9,73.8,2.2],"Hand County, South Dakota":[40.7,0.4,1.5,4.2,52.2,1],"Hanson County, South Dakota":[15.6,6.5,0,0.9,77,0],"Harding County, South Dakota":[19.2,0,1.8,4.1,71.7,3.2],"Hughes County, South Dakota":[36.6,0,0.9,5,52.9,4.6],"Hutchinson County, South Dakota":[31,0,1.6,7.4,60,0],"Hyde County, South Dakota":[23.2,0,6.8,6.1,63.2,0.6],"Jackson County, South Dakota":[27.4,0,2.6,10,60,0],"Jerauld County, South Dakota":[35.5,0,7.9,0,56.5,0.2],"Jones County, South Dakota":[28.7,0,0,16.6,54.7,0],"Kingsbury County, South Dakota":[29.3,2,0,5.1,59.2,4.3],"Lake County, South Dakota":[21.3,0,0.7,8.7,66.8,2.6],"Lawrence County, South Dakota":[30.8,0,1.7,5.6,57.8,4.1],"Lincoln County, South Dakota":[22.1,1.3,0.7,6.7,66.6,2.6],"Lyman County, South Dakota":[30,0,0.8,13.1,54,2.2],"Marshall County, South Dakota":[38.2,0,0,8.7,52.5,0.6],"McCook County, South Dakota":[26.6,0,0.5,3.2,69.4,0.3],"McPherson County, South Dakota":[26,0.3,0,7.9,61,4.7],"Meade County, South Dakota":[27.7,0,1.8,8.3,60.2,2],"Mellette County, South Dakota":[26.4,0,2.1,18.7,50.4,2.5],"Miner County, South Dakota":[30.2,0,2.9,15.5,49.9,1.5],"Minnehaha County, South Dakota":[33.6,0.3,0.9,6.2,56.6,2.5],"Moody County, South Dakota":[34.4,0,1,6.8,56.7,1.1],"Oglala Lakota County, South Dakota":[10.6,0,2.7,61.5,17.1,8.1],"Pennington County, South Dakota":[29.1,0.1,3.3,9.8,54.6,3.1],"Perkins County, South Dakota":[29.3,0,1.2,4.7,64.2,0.5],"Potter County, South Dakota":[29.6,0,0,3.6,65.8,1],"Roberts County, South Dakota":[24,0.2,0.7,9.4,61.9,3.8],"Sanborn County, South Dakota":[34.4,0,0,7.3,54.2,4],"Spink County, South Dakota":[28.1,0,1.1,8.9,60.2,1.7],"Stanley County, South Dakota":[22.7,0,0,13.2,64.1,0],"Sully County, South Dakota":[28.3,0,1.1,0.8,64.6,5.1],"Todd County, South Dakota":[20,3.5,1.8,34.7,40.1,0],"Tripp County, South Dakota":[33,0,2.3,7.3,56.5,0.8],"Turner County, South Dakota":[29.3,0.1,2,6.6,59.7,2.4],"Union County, South Dakota":[26.4,0,4.1,3.3,65.1,1.1],"Walworth County, South Dakota":[26.3,0,0,5.6,66.3,1.7],"Yankton County, South Dakota":[36.1,0,0.3,4,57.2,2.4],"Ziebach County, South Dakota":[20.7,0.8,12.8,25.2,40.6,0]};
  const nationalAvg = [27.3,0.3,2.3,14.5,53.2,2.4];
  const categories = ["Lives alone","With child","With nonrelatives","With other relatives","With spouse only","With unmarried partner"];
  const ctx = document.getElementById("barChart").getContext("2d");
  let chart;

  function renderChart(values) {
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: categories,
        datasets: [
          {
            label: "County/State",
            data: values,
            backgroundColor: [
              "#e41a1c", "#ff7f00", "#4daf4a",
              "#984ea3", "#377eb8", "#a65628"
            ]
          },
          {
            label: "",
            data: categories.map(c => nationalAvg[c]),
            type: "line",
            borderColor: "gray",
            borderWidth: 1,
            borderDash: [4, 4],
            pointRadius: 0,
            fill: false
          }
        ]
      },
      options: {
        indexAxis: "y",
        scales: {
          x: {
            min: 0,
            max: 100,
            ticks: {
              callback: function(v) { return v + "%"; }
            }
          }
        },
        plugins: {
          legend: {
            labels: {
              filter: function(item) { return item.text !== ""; }
            }
          },
          tooltip: {
            callbacks: {
              label: function(ctx) {
                return ctx.dataset.label !== "" ? ctx.dataset.label + ": " + ctx.raw + "%" : null;
              }
            }
          }
        }
      }
    });
  }

  document.getElementById("countySelect").addEventListener("change", function() {
    renderChart(Object.values(data[this.value]));
  });

  renderChart(Object.values(data["Statewide"]));</script>
  </body>
</html>
</html>
