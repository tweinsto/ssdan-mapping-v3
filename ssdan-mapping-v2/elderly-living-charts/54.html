<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>

  <meta charset="UTF-8"/>
  <title>Living Arrangements â€“ West Virginia</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body { font-family: sans-serif; margin: 1rem 2rem; text-align: center; }
        h2 { margin-bottom: 0.25rem; font-size: 1.6rem; }
        select { padding: 0.4rem; font-size: 1rem; margin: 1rem 0; }
        canvas { width: 100%; max-width: 850px; height: 500px; }
      </style>
</head>
<html>
  <body>
    <h2>Living Arrangements of Adults 65+ in West Virginia</h2>
    <label>Select County:</label>
    <select id="countySelect">
      <option value="Statewide">Statewide</option>
      <option value="Barbour County, West Virginia">Barbour County, West Virginia</option>
      <option value="Berkeley County, West Virginia">Berkeley County, West Virginia</option>
      <option value="Boone County, West Virginia">Boone County, West Virginia</option>
      <option value="Braxton County, West Virginia">Braxton County, West Virginia</option>
      <option value="Brooke County, West Virginia">Brooke County, West Virginia</option>
      <option value="Cabell County, West Virginia">Cabell County, West Virginia</option>
      <option value="Calhoun County, West Virginia">Calhoun County, West Virginia</option>
      <option value="Clay County, West Virginia">Clay County, West Virginia</option>
      <option value="Doddridge County, West Virginia">Doddridge County, West Virginia</option>
      <option value="Fayette County, West Virginia">Fayette County, West Virginia</option>
      <option value="Gilmer County, West Virginia">Gilmer County, West Virginia</option>
      <option value="Grant County, West Virginia">Grant County, West Virginia</option>
      <option value="Greenbrier County, West Virginia">Greenbrier County, West Virginia</option>
      <option value="Hampshire County, West Virginia">Hampshire County, West Virginia</option>
      <option value="Hancock County, West Virginia">Hancock County, West Virginia</option>
      <option value="Hardy County, West Virginia">Hardy County, West Virginia</option>
      <option value="Harrison County, West Virginia">Harrison County, West Virginia</option>
      <option value="Jackson County, West Virginia">Jackson County, West Virginia</option>
      <option value="Jefferson County, West Virginia">Jefferson County, West Virginia</option>
      <option value="Kanawha County, West Virginia">Kanawha County, West Virginia</option>
      <option value="Lewis County, West Virginia">Lewis County, West Virginia</option>
      <option value="Lincoln County, West Virginia">Lincoln County, West Virginia</option>
      <option value="Logan County, West Virginia">Logan County, West Virginia</option>
      <option value="Marion County, West Virginia">Marion County, West Virginia</option>
      <option value="Marshall County, West Virginia">Marshall County, West Virginia</option>
      <option value="Mason County, West Virginia">Mason County, West Virginia</option>
      <option value="McDowell County, West Virginia">McDowell County, West Virginia</option>
      <option value="Mercer County, West Virginia">Mercer County, West Virginia</option>
      <option value="Mineral County, West Virginia">Mineral County, West Virginia</option>
      <option value="Mingo County, West Virginia">Mingo County, West Virginia</option>
      <option value="Monongalia County, West Virginia">Monongalia County, West Virginia</option>
      <option value="Monroe County, West Virginia">Monroe County, West Virginia</option>
      <option value="Morgan County, West Virginia">Morgan County, West Virginia</option>
      <option value="Nicholas County, West Virginia">Nicholas County, West Virginia</option>
      <option value="Ohio County, West Virginia">Ohio County, West Virginia</option>
      <option value="Pendleton County, West Virginia">Pendleton County, West Virginia</option>
      <option value="Pleasants County, West Virginia">Pleasants County, West Virginia</option>
      <option value="Pocahontas County, West Virginia">Pocahontas County, West Virginia</option>
      <option value="Preston County, West Virginia">Preston County, West Virginia</option>
      <option value="Putnam County, West Virginia">Putnam County, West Virginia</option>
      <option value="Raleigh County, West Virginia">Raleigh County, West Virginia</option>
      <option value="Randolph County, West Virginia">Randolph County, West Virginia</option>
      <option value="Ritchie County, West Virginia">Ritchie County, West Virginia</option>
      <option value="Roane County, West Virginia">Roane County, West Virginia</option>
      <option value="Summers County, West Virginia">Summers County, West Virginia</option>
      <option value="Taylor County, West Virginia">Taylor County, West Virginia</option>
      <option value="Tucker County, West Virginia">Tucker County, West Virginia</option>
      <option value="Tyler County, West Virginia">Tyler County, West Virginia</option>
      <option value="Upshur County, West Virginia">Upshur County, West Virginia</option>
      <option value="Wayne County, West Virginia">Wayne County, West Virginia</option>
      <option value="Webster County, West Virginia">Webster County, West Virginia</option>
      <option value="Wetzel County, West Virginia">Wetzel County, West Virginia</option>
      <option value="Wirt County, West Virginia">Wirt County, West Virginia</option>
      <option value="Wood County, West Virginia">Wood County, West Virginia</option>
      <option value="Wyoming County, West Virginia">Wyoming County, West Virginia</option>
    </select>
    <canvas id="barChart"></canvas>
    <script>  const data = {"Statewide":[29.6,0.4,2,12,54,2],"Barbour County, West Virginia":[34.2,0.8,0.7,12.5,49.2,2.6],"Berkeley County, West Virginia":[26.2,0.1,2.6,14.2,54.7,2.2],"Boone County, West Virginia":[27.2,0.7,2.7,14.5,54.3,0.5],"Braxton County, West Virginia":[22.9,1.2,2.2,11.5,60.4,1.8],"Brooke County, West Virginia":[31.1,0.2,3.5,12.8,49.4,3],"Cabell County, West Virginia":[32.5,0.8,3,11.5,50.3,2],"Calhoun County, West Virginia":[26.4,0,2.2,8.3,55.6,7.5],"Clay County, West Virginia":[28.6,0.2,0.8,9.5,57.8,3.1],"Doddridge County, West Virginia":[17.6,0,2.1,13.6,64.3,2.4],"Fayette County, West Virginia":[30.2,0.9,1.1,10.3,53.6,4.1],"Gilmer County, West Virginia":[27.9,1,0,10.2,58.7,2.2],"Grant County, West Virginia":[27.9,0.9,5.8,6,56.9,2.4],"Greenbrier County, West Virginia":[36.4,0.5,2.1,7.9,50.6,2.5],"Hampshire County, West Virginia":[29.7,0.4,1.7,13.8,53.4,0.9],"Hancock County, West Virginia":[31.2,0,1.2,9.9,57.5,0.2],"Hardy County, West Virginia":[25.1,0.3,4.7,9.2,57.7,2.9],"Harrison County, West Virginia":[32.9,0.5,2.6,13.9,48.4,1.7],"Jackson County, West Virginia":[29.9,0.4,1.2,9.1,58.8,0.6],"Jefferson County, West Virginia":[28.3,0.1,2.2,16.6,49.1,3.7],"Kanawha County, West Virginia":[31.9,0.3,1.8,13.4,49.3,3.3],"Lewis County, West Virginia":[30,0.4,1.3,9.6,57,1.7],"Lincoln County, West Virginia":[23.7,0.1,0.3,15.9,59.7,0.4],"Logan County, West Virginia":[28.5,0.2,3.2,14.1,52.5,1.4],"Marion County, West Virginia":[29.1,0.1,1.2,11.3,57.7,0.6],"Marshall County, West Virginia":[26.7,0.3,0.8,9.8,60.9,1.6],"Mason County, West Virginia":[29.6,0,0,7.4,62.2,0.8],"McDowell County, West Virginia":[30.8,2.4,1.6,21.7,42.7,0.7],"Mercer County, West Virginia":[26.4,0.2,1.9,14.5,55.9,1.2],"Mineral County, West Virginia":[30,0,0.1,10.6,56.9,2.4],"Mingo County, West Virginia":[26.4,0,2.2,14.5,56.9,0],"Monongalia County, West Virginia":[29.5,0.3,0.8,10.3,56.2,2.9],"Monroe County, West Virginia":[28.3,0,0.8,9,61.4,0.5],"Morgan County, West Virginia":[28.9,0,4.2,11.2,53.9,1.7],"Nicholas County, West Virginia":[28.3,2.2,2.2,7.5,57.4,2.3],"Ohio County, West Virginia":[39,0.3,0.6,9.7,48.6,1.9],"Pendleton County, West Virginia":[21.9,0,3.5,13.6,59.4,1.7],"Pleasants County, West Virginia":[21.4,0.9,1.5,11.1,63.5,1.7],"Pocahontas County, West Virginia":[34.3,0.2,2.1,11.4,51.1,0.8],"Preston County, West Virginia":[29.6,0,1,10.6,56,2.6],"Putnam County, West Virginia":[21.8,0.5,1,9.1,65.7,1.9],"Raleigh County, West Virginia":[29.5,0.3,2.3,13.3,53.7,0.8],"Randolph County, West Virginia":[28.7,0,2.5,11.9,56.1,0.8],"Ritchie County, West Virginia":[29.5,0.8,2.2,12.8,47.5,7.3],"Roane County, West Virginia":[31.4,0,4,12.5,45,7.1],"Summers County, West Virginia":[39.2,0.2,2.2,18.7,39.2,0.5],"Taylor County, West Virginia":[24.4,0.3,2.4,16.3,56.1,0.5],"Tucker County, West Virginia":[29.9,0,0.5,10.9,58.1,0.6],"Tyler County, West Virginia":[28.6,0,2.2,10.7,56.4,2.1],"Upshur County, West Virginia":[27.1,0.2,9.1,7.6,53.4,2.5],"Wayne County, West Virginia":[28.2,0.8,0.5,12.5,55.4,2.6],"Webster County, West Virginia":[24.1,1.4,6.8,11.9,53.4,2.4],"Wetzel County, West Virginia":[32.9,0.4,0.6,8.4,56.5,1.1],"Wirt County, West Virginia":[29,0,0,11.4,58.7,0.9],"Wood County, West Virginia":[35.2,0.2,2,10.2,51.3,1.1],"Wyoming County, West Virginia":[19.9,0.6,1.1,13.1,63.6,1.6]};
  const nationalAvg = [27.3,0.3,2.3,14.5,53.2,2.4];
  const categories = ["Lives alone","With child","With nonrelatives","With other relatives","With spouse only","With unmarried partner"];
  const ctx = document.getElementById("barChart").getContext("2d");
  let chart;

  function renderChart(values) {
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: categories,
        datasets: [
          {
            label: "County/State",
            data: values,
            backgroundColor: [
              "#e41a1c", "#ff7f00", "#4daf4a",
              "#984ea3", "#377eb8", "#a65628"
            ]
          },
          {
            label: "",
            data: categories.map(c => nationalAvg[c]),
            type: "line",
            borderColor: "gray",
            borderWidth: 1,
            borderDash: [4, 4],
            pointRadius: 0,
            fill: false
          }
        ]
      },
      options: {
        indexAxis: "y",
        scales: {
          x: {
            min: 0,
            max: 100,
            ticks: {
              callback: function(v) { return v + "%"; }
            }
          }
        },
        plugins: {
          legend: {
            labels: {
              filter: function(item) { return item.text !== ""; }
            }
          },
          tooltip: {
            callbacks: {
              label: function(ctx) {
                return ctx.dataset.label !== "" ? ctx.dataset.label + ": " + ctx.raw + "%" : null;
              }
            }
          }
        }
      }
    });
  }

  document.getElementById("countySelect").addEventListener("change", function() {
    renderChart(Object.values(data[this.value]));
  });

  renderChart(Object.values(data["Statewide"]));</script>
  </body>
</html>
</html>
