<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>

  <meta charset="UTF-8"/>
  <title>Living Arrangements – New Mexico</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body { font-family: sans-serif; margin: 1rem 2rem; text-align: center; }
        h2 { margin-bottom: 0.25rem; font-size: 1.6rem; }
        select { padding: 0.4rem; font-size: 1rem; margin: 1rem 0; }
        canvas { width: 100%; max-width: 850px; height: 500px; }
      </style>
</head>
<html>
  <body>
    <h2>Living Arrangements of Adults 65+ in New Mexico</h2>
    <label>Select County:</label>
    <select id="countySelect">
      <option value="Statewide">Statewide</option>
      <option value="Bernalillo County, New Mexico">Bernalillo County, New Mexico</option>
      <option value="Catron County, New Mexico">Catron County, New Mexico</option>
      <option value="Chaves County, New Mexico">Chaves County, New Mexico</option>
      <option value="Cibola County, New Mexico">Cibola County, New Mexico</option>
      <option value="Colfax County, New Mexico">Colfax County, New Mexico</option>
      <option value="Curry County, New Mexico">Curry County, New Mexico</option>
      <option value="De Baca County, New Mexico">De Baca County, New Mexico</option>
      <option value="Doña Ana County, New Mexico">Doña Ana County, New Mexico</option>
      <option value="Eddy County, New Mexico">Eddy County, New Mexico</option>
      <option value="Grant County, New Mexico">Grant County, New Mexico</option>
      <option value="Guadalupe County, New Mexico">Guadalupe County, New Mexico</option>
      <option value="Harding County, New Mexico">Harding County, New Mexico</option>
      <option value="Hidalgo County, New Mexico">Hidalgo County, New Mexico</option>
      <option value="Lea County, New Mexico">Lea County, New Mexico</option>
      <option value="Lincoln County, New Mexico">Lincoln County, New Mexico</option>
      <option value="Los Alamos County, New Mexico">Los Alamos County, New Mexico</option>
      <option value="Luna County, New Mexico">Luna County, New Mexico</option>
      <option value="McKinley County, New Mexico">McKinley County, New Mexico</option>
      <option value="Mora County, New Mexico">Mora County, New Mexico</option>
      <option value="Otero County, New Mexico">Otero County, New Mexico</option>
      <option value="Quay County, New Mexico">Quay County, New Mexico</option>
      <option value="Rio Arriba County, New Mexico">Rio Arriba County, New Mexico</option>
      <option value="Roosevelt County, New Mexico">Roosevelt County, New Mexico</option>
      <option value="San Juan County, New Mexico">San Juan County, New Mexico</option>
      <option value="San Miguel County, New Mexico">San Miguel County, New Mexico</option>
      <option value="Sandoval County, New Mexico">Sandoval County, New Mexico</option>
      <option value="Santa Fe County, New Mexico">Santa Fe County, New Mexico</option>
      <option value="Sierra County, New Mexico">Sierra County, New Mexico</option>
      <option value="Socorro County, New Mexico">Socorro County, New Mexico</option>
      <option value="Taos County, New Mexico">Taos County, New Mexico</option>
      <option value="Torrance County, New Mexico">Torrance County, New Mexico</option>
      <option value="Union County, New Mexico">Union County, New Mexico</option>
      <option value="Valencia County, New Mexico">Valencia County, New Mexico</option>
    </select>
    <canvas id="barChart"></canvas>
    <script>  const data = {"Statewide":[29.1,0.3,2.4,14.2,50.5,3.6],"Bernalillo County, New Mexico":[33,0.3,2.4,13.9,47.2,3.1],"Catron County, New Mexico":[35,0,0,8.5,47.3,9.2],"Chaves County, New Mexico":[32.9,1.1,3.1,16.5,43.2,3.1],"Cibola County, New Mexico":[28,0.1,2.3,14.7,48.2,6.7],"Colfax County, New Mexico":[34.7,0.1,1,11.1,51.8,1.3],"Curry County, New Mexico":[37.2,0.3,2.2,10.7,46.9,2.7],"De Baca County, New Mexico":[54.8,0,0,1.3,42.1,1.9],"Doña Ana County, New Mexico":[24.4,0.1,1.9,14.3,54.7,4.6],"Eddy County, New Mexico":[33,0.5,2.2,11.3,51.9,1],"Grant County, New Mexico":[28.7,0.5,2.3,14.2,49.7,4.6],"Guadalupe County, New Mexico":[23.3,4.1,0,18.3,54.3,0],"Harding County, New Mexico":[42.3,7.2,0,8.7,40.9,1],"Hidalgo County, New Mexico":[26.9,0.7,0,12.2,52.5,7.7],"Lea County, New Mexico":[28.3,0.1,3.9,12.3,54.1,1.4],"Lincoln County, New Mexico":[27.6,1.5,1.8,10,57.2,2],"Los Alamos County, New Mexico":[21.5,0,0.3,10.8,64.9,2.3],"Luna County, New Mexico":[32,0.6,7.3,17.3,41.4,1.4],"McKinley County, New Mexico":[19.7,0.2,0.9,32,42.5,4.7],"Mora County, New Mexico":[14.8,0,0,10.2,65.5,9.4],"Otero County, New Mexico":[26.2,0.1,1,15.7,54.9,2.2],"Quay County, New Mexico":[41.2,0,0,12.2,43.2,3.4],"Rio Arriba County, New Mexico":[27.3,0,3.2,15.6,47,6.9],"Roosevelt County, New Mexico":[35.9,0,2.6,14.5,46.7,0.4],"San Juan County, New Mexico":[21,0.6,1.2,20.2,53.8,3.2],"San Miguel County, New Mexico":[36.8,0.4,1.8,10.7,48,2.3],"Sandoval County, New Mexico":[21.3,0.2,1.9,14.3,59.4,2.9],"Santa Fe County, New Mexico":[30.9,0.1,2.6,9.5,51.5,5.3],"Sierra County, New Mexico":[35.7,2.6,4.8,5.2,47.4,4.4],"Socorro County, New Mexico":[23.3,0,5.7,21.9,45.3,3.8],"Taos County, New Mexico":[32.7,0,1.6,12.6,47.4,5.7],"Torrance County, New Mexico":[21.4,0,4.1,14.6,59.1,0.8],"Union County, New Mexico":[40.3,3.3,0,8.8,45.7,1.9],"Valencia County, New Mexico":[24.1,0.5,4.3,18.5,49.9,2.8]};
  const nationalAvg = [27.3,0.3,2.3,14.5,53.2,2.4];
  const categories = ["Lives alone","With child","With nonrelatives","With other relatives","With spouse only","With unmarried partner"];
  const ctx = document.getElementById("barChart").getContext("2d");
  let chart;

  function renderChart(values) {
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: categories,
        datasets: [
          {
            label: "County/State",
            data: values,
            backgroundColor: [
              "#e41a1c", "#ff7f00", "#4daf4a",
              "#984ea3", "#377eb8", "#a65628"
            ]
          },
          {
            label: "",
            data: categories.map(c => nationalAvg[c]),
            type: "line",
            borderColor: "gray",
            borderWidth: 1,
            borderDash: [4, 4],
            pointRadius: 0,
            fill: false
          }
        ]
      },
      options: {
        indexAxis: "y",
        scales: {
          x: {
            min: 0,
            max: 100,
            ticks: {
              callback: function(v) { return v + "%"; }
            }
          }
        },
        plugins: {
          legend: {
            labels: {
              filter: function(item) { return item.text !== ""; }
            }
          },
          tooltip: {
            callbacks: {
              label: function(ctx) {
                return ctx.dataset.label !== "" ? ctx.dataset.label + ": " + ctx.raw + "%" : null;
              }
            }
          }
        }
      }
    });
  }

  document.getElementById("countySelect").addEventListener("change", function() {
    renderChart(Object.values(data[this.value]));
  });

  renderChart(Object.values(data["Statewide"]));</script>
  </body>
</html>
</html>
