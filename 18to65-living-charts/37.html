<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>

  <meta charset="UTF-8"/>
  <title>Living Arrangements 18–64 – North Carolina</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
      body { font-family: sans-serif; margin: 1.25rem 2rem; text-align: center; }
      h2 { margin-bottom: .25rem; font-size: 1.6rem; color: #2c348b; }
      label { margin-right: .5rem; }
      select { padding: .45rem .6rem; font-size: 1rem; border-radius: .5rem; border: 2px solid #f39c12; }
      canvas { width: 100%; max-width: 900px; height: 520px; }
    </style>
</head>
<html>
  <body>
    <h2>Living Arrangements of Adults 18–64 in North Carolina</h2>
    <label>Select County:</label>
    <select id="countySelect">
      <option value="Statewide">Statewide</option>
      <option value="Alamance County, North Carolina">Alamance County, North Carolina</option>
      <option value="Alexander County, North Carolina">Alexander County, North Carolina</option>
      <option value="Alleghany County, North Carolina">Alleghany County, North Carolina</option>
      <option value="Anson County, North Carolina">Anson County, North Carolina</option>
      <option value="Ashe County, North Carolina">Ashe County, North Carolina</option>
      <option value="Avery County, North Carolina">Avery County, North Carolina</option>
      <option value="Beaufort County, North Carolina">Beaufort County, North Carolina</option>
      <option value="Bertie County, North Carolina">Bertie County, North Carolina</option>
      <option value="Bladen County, North Carolina">Bladen County, North Carolina</option>
      <option value="Brunswick County, North Carolina">Brunswick County, North Carolina</option>
      <option value="Buncombe County, North Carolina">Buncombe County, North Carolina</option>
      <option value="Burke County, North Carolina">Burke County, North Carolina</option>
      <option value="Cabarrus County, North Carolina">Cabarrus County, North Carolina</option>
      <option value="Caldwell County, North Carolina">Caldwell County, North Carolina</option>
      <option value="Camden County, North Carolina">Camden County, North Carolina</option>
      <option value="Carteret County, North Carolina">Carteret County, North Carolina</option>
      <option value="Caswell County, North Carolina">Caswell County, North Carolina</option>
      <option value="Catawba County, North Carolina">Catawba County, North Carolina</option>
      <option value="Chatham County, North Carolina">Chatham County, North Carolina</option>
      <option value="Cherokee County, North Carolina">Cherokee County, North Carolina</option>
      <option value="Chowan County, North Carolina">Chowan County, North Carolina</option>
      <option value="Clay County, North Carolina">Clay County, North Carolina</option>
      <option value="Cleveland County, North Carolina">Cleveland County, North Carolina</option>
      <option value="Columbus County, North Carolina">Columbus County, North Carolina</option>
      <option value="Craven County, North Carolina">Craven County, North Carolina</option>
      <option value="Cumberland County, North Carolina">Cumberland County, North Carolina</option>
      <option value="Currituck County, North Carolina">Currituck County, North Carolina</option>
      <option value="Dare County, North Carolina">Dare County, North Carolina</option>
      <option value="Davidson County, North Carolina">Davidson County, North Carolina</option>
      <option value="Davie County, North Carolina">Davie County, North Carolina</option>
      <option value="Duplin County, North Carolina">Duplin County, North Carolina</option>
      <option value="Durham County, North Carolina">Durham County, North Carolina</option>
      <option value="Edgecombe County, North Carolina">Edgecombe County, North Carolina</option>
      <option value="Forsyth County, North Carolina">Forsyth County, North Carolina</option>
      <option value="Franklin County, North Carolina">Franklin County, North Carolina</option>
      <option value="Gaston County, North Carolina">Gaston County, North Carolina</option>
      <option value="Gates County, North Carolina">Gates County, North Carolina</option>
      <option value="Graham County, North Carolina">Graham County, North Carolina</option>
      <option value="Granville County, North Carolina">Granville County, North Carolina</option>
      <option value="Greene County, North Carolina">Greene County, North Carolina</option>
      <option value="Guilford County, North Carolina">Guilford County, North Carolina</option>
      <option value="Halifax County, North Carolina">Halifax County, North Carolina</option>
      <option value="Harnett County, North Carolina">Harnett County, North Carolina</option>
      <option value="Haywood County, North Carolina">Haywood County, North Carolina</option>
      <option value="Henderson County, North Carolina">Henderson County, North Carolina</option>
      <option value="Hertford County, North Carolina">Hertford County, North Carolina</option>
      <option value="Hoke County, North Carolina">Hoke County, North Carolina</option>
      <option value="Hyde County, North Carolina">Hyde County, North Carolina</option>
      <option value="Iredell County, North Carolina">Iredell County, North Carolina</option>
      <option value="Jackson County, North Carolina">Jackson County, North Carolina</option>
      <option value="Johnston County, North Carolina">Johnston County, North Carolina</option>
      <option value="Jones County, North Carolina">Jones County, North Carolina</option>
      <option value="Lee County, North Carolina">Lee County, North Carolina</option>
      <option value="Lenoir County, North Carolina">Lenoir County, North Carolina</option>
      <option value="Lincoln County, North Carolina">Lincoln County, North Carolina</option>
      <option value="Macon County, North Carolina">Macon County, North Carolina</option>
      <option value="Madison County, North Carolina">Madison County, North Carolina</option>
      <option value="Martin County, North Carolina">Martin County, North Carolina</option>
      <option value="McDowell County, North Carolina">McDowell County, North Carolina</option>
      <option value="Mecklenburg County, North Carolina">Mecklenburg County, North Carolina</option>
      <option value="Mitchell County, North Carolina">Mitchell County, North Carolina</option>
      <option value="Montgomery County, North Carolina">Montgomery County, North Carolina</option>
      <option value="Moore County, North Carolina">Moore County, North Carolina</option>
      <option value="Nash County, North Carolina">Nash County, North Carolina</option>
      <option value="New Hanover County, North Carolina">New Hanover County, North Carolina</option>
      <option value="Northampton County, North Carolina">Northampton County, North Carolina</option>
      <option value="Onslow County, North Carolina">Onslow County, North Carolina</option>
      <option value="Orange County, North Carolina">Orange County, North Carolina</option>
      <option value="Pamlico County, North Carolina">Pamlico County, North Carolina</option>
      <option value="Pasquotank County, North Carolina">Pasquotank County, North Carolina</option>
      <option value="Pender County, North Carolina">Pender County, North Carolina</option>
      <option value="Perquimans County, North Carolina">Perquimans County, North Carolina</option>
      <option value="Person County, North Carolina">Person County, North Carolina</option>
      <option value="Pitt County, North Carolina">Pitt County, North Carolina</option>
      <option value="Polk County, North Carolina">Polk County, North Carolina</option>
      <option value="Randolph County, North Carolina">Randolph County, North Carolina</option>
      <option value="Richmond County, North Carolina">Richmond County, North Carolina</option>
      <option value="Robeson County, North Carolina">Robeson County, North Carolina</option>
      <option value="Rockingham County, North Carolina">Rockingham County, North Carolina</option>
      <option value="Rowan County, North Carolina">Rowan County, North Carolina</option>
      <option value="Rutherford County, North Carolina">Rutherford County, North Carolina</option>
      <option value="Sampson County, North Carolina">Sampson County, North Carolina</option>
      <option value="Scotland County, North Carolina">Scotland County, North Carolina</option>
      <option value="Stanly County, North Carolina">Stanly County, North Carolina</option>
      <option value="Stokes County, North Carolina">Stokes County, North Carolina</option>
      <option value="Surry County, North Carolina">Surry County, North Carolina</option>
      <option value="Swain County, North Carolina">Swain County, North Carolina</option>
      <option value="Transylvania County, North Carolina">Transylvania County, North Carolina</option>
      <option value="Tyrrell County, North Carolina">Tyrrell County, North Carolina</option>
      <option value="Union County, North Carolina">Union County, North Carolina</option>
      <option value="Vance County, North Carolina">Vance County, North Carolina</option>
      <option value="Wake County, North Carolina">Wake County, North Carolina</option>
      <option value="Warren County, North Carolina">Warren County, North Carolina</option>
      <option value="Washington County, North Carolina">Washington County, North Carolina</option>
      <option value="Watauga County, North Carolina">Watauga County, North Carolina</option>
      <option value="Wayne County, North Carolina">Wayne County, North Carolina</option>
      <option value="Wilkes County, North Carolina">Wilkes County, North Carolina</option>
      <option value="Wilson County, North Carolina">Wilson County, North Carolina</option>
      <option value="Yadkin County, North Carolina">Yadkin County, North Carolina</option>
      <option value="Yancey County, North Carolina">Yancey County, North Carolina</option>
    </select>
    <canvas id="barChart"></canvas>
    <script>document.addEventListener("DOMContentLoaded", function () {
  const data = {"Statewide":[11.8,14,5.4,12.7,48.1,8.1],"Alamance County, North Carolina":[12.3,15.3,4.1,12.5,47.8,8],"Alexander County, North Carolina":[7,18.3,2.3,10.5,52.8,9.2],"Alleghany County, North Carolina":[11.1,9.7,6.6,10.5,59.6,2.5],"Anson County, North Carolina":[11.7,22,3.5,18.2,35.6,9],"Ashe County, North Carolina":[10.6,12.5,2.1,12.4,55.2,7.2],"Avery County, North Carolina":[12.4,15.1,2.6,11.8,53.7,4.4],"Beaufort County, North Carolina":[10.4,14,3.4,15.3,50.5,6.4],"Bertie County, North Carolina":[11.2,22.2,2,16,42.5,6.1],"Bladen County, North Carolina":[12.8,23.8,3.2,16.9,37.6,5.6],"Brunswick County, North Carolina":[9.7,14.2,3.6,11.5,52.9,8.1],"Buncombe County, North Carolina":[10.9,15.9,12.3,12.6,41.2,7.2],"Burke County, North Carolina":[9.1,14.3,3.8,14.4,49.9,8.5],"Cabarrus County, North Carolina":[8.3,16.5,3.5,13.3,52,6.5],"Caldwell County, North Carolina":[9.8,17.1,3.5,14.7,47.6,7.2],"Camden County, North Carolina":[6.8,16.5,1,7,64.4,4.3],"Carteret County, North Carolina":[12.1,10.8,3.4,8.7,57.1,7.8],"Caswell County, North Carolina":[7.5,19.1,6.1,11.1,49.1,7.1],"Catawba County, North Carolina":[9.9,13.8,4.1,12.6,50.2,9.4],"Chatham County, North Carolina":[7.3,11.9,3,11,59.5,7.4],"Cherokee County, North Carolina":[13.5,11.2,6.1,13.6,50.2,5.4],"Chowan County, North Carolina":[11.7,17.2,1.1,13.3,49.3,7.4],"Clay County, North Carolina":[11.4,17.5,6.6,6.6,51.7,6.1],"Cleveland County, North Carolina":[9.8,18.7,4,16.6,44.4,6.6],"Columbus County, North Carolina":[10.3,19.9,4.7,16.2,43.6,5.3],"Craven County, North Carolina":[12.3,11.9,3.4,12.1,53.3,7],"Cumberland County, North Carolina":[14.6,13.5,5.3,15.3,44.2,7.1],"Currituck County, North Carolina":[5.9,12.1,3.9,10,60.7,7.4],"Dare County, North Carolina":[9.4,11.1,6.2,8.7,52.8,11.7],"Davidson County, North Carolina":[9,15.2,3,12.4,52.8,7.7],"Davie County, North Carolina":[9,17.3,4.1,10.9,53.4,5.3],"Duplin County, North Carolina":[12.1,14.6,2.9,12.1,50.6,7.8],"Durham County, North Carolina":[17.3,10.9,8.2,12.6,41.3,9.8],"Edgecombe County, North Carolina":[9.2,16.8,3.2,23.9,35.9,10.9],"Forsyth County, North Carolina":[14.1,15,4.5,13.3,44.8,8.3],"Franklin County, North Carolina":[7.6,16.3,2.8,11.7,54.1,7.5],"Gaston County, North Carolina":[10,14.2,4,14.6,47.6,9.5],"Gates County, North Carolina":[9.7,13.2,5.3,12.2,53,6.6],"Graham County, North Carolina":[13.1,19.6,3.5,6.8,49.8,7.1],"Granville County, North Carolina":[8.8,16.1,2.9,15.5,48.6,8.1],"Greene County, North Carolina":[11.6,19.7,4.4,20.3,35.4,8.5],"Guilford County, North Carolina":[13.9,14.4,5.7,14.6,43.1,8.3],"Halifax County, North Carolina":[11.8,21,1.9,17.2,39.3,8.8],"Harnett County, North Carolina":[9.3,15.4,4.3,12.2,51.7,7.1],"Haywood County, North Carolina":[10.6,14.1,3.6,12.8,50.6,8.4],"Henderson County, North Carolina":[10,12.4,4.4,10.9,54.6,7.8],"Hertford County, North Carolina":[13.9,14.7,2.7,18,43.9,6.8],"Hoke County, North Carolina":[12.9,17,3.9,15.1,43.8,7.3],"Hyde County, North Carolina":[17,4.3,0.1,16.2,52.1,10.2],"Iredell County, North Carolina":[9,15.4,3.3,11.4,54.1,6.9],"Jackson County, North Carolina":[15.3,7.7,14.1,10.5,40.7,11.7],"Johnston County, North Carolina":[7.8,15,2.5,11.2,56.3,7.3],"Jones County, North Carolina":[11.7,13.5,4.5,17.2,48.1,5.1],"Lee County, North Carolina":[9.1,16.6,4.4,14,46.1,9.9],"Lenoir County, North Carolina":[14.3,15.9,4.7,16.8,38.9,9.5],"Lincoln County, North Carolina":[8.1,13.8,2.7,12.3,57.4,5.7],"Macon County, North Carolina":[14.9,7.9,2.6,9.2,58.3,7.1],"Madison County, North Carolina":[9.4,19.4,2.7,12.7,50.6,5.1],"Martin County, North Carolina":[11.4,19.2,2.5,16.4,43,7.5],"McDowell County, North Carolina":[9.8,11.2,4.2,13.5,55.2,6.1],"Mecklenburg County, North Carolina":[15.9,12.8,6.7,13,42.8,8.8],"Mitchell County, North Carolina":[10.1,14.5,3.5,10,55.4,6.4],"Montgomery County, North Carolina":[8,18.4,3.2,13.9,48.6,7.9],"Moore County, North Carolina":[11.7,12.7,4,9.6,56.2,5.9],"Nash County, North Carolina":[11.6,17.2,2.5,18.6,41.6,8.6],"New Hanover County, North Carolina":[14.8,9.5,8.9,9.7,46.2,11],"Northampton County, North Carolina":[13.7,17,1.1,17.6,41.8,8.8],"Onslow County, North Carolina":[9.6,8.4,4.5,10,60.4,7],"Orange County, North Carolina":[12.5,10.2,13.7,7.2,49.6,6.8],"Pamlico County, North Carolina":[10.9,18.8,1.8,10.1,47.8,10.5],"Pasquotank County, North Carolina":[9.9,16.7,5.2,12.3,49.2,6.6],"Pender County, North Carolina":[9.4,15.4,3.9,10.7,51.5,9.2],"Perquimans County, North Carolina":[11.2,19.3,1.7,15,47.9,4.8],"Person County, North Carolina":[7.9,14.5,4.7,14.4,49.9,8.7],"Pitt County, North Carolina":[15.1,9.4,12.9,14.7,37.2,10.7],"Polk County, North Carolina":[11.3,16.5,3,8.2,53.9,7.1],"Randolph County, North Carolina":[10.1,16.6,2.3,11.4,49.6,10],"Richmond County, North Carolina":[11.4,16.7,5.6,19.5,39.8,7],"Robeson County, North Carolina":[12.3,20.7,4,20.6,35.1,7.3],"Rockingham County, North Carolina":[12.2,14.4,3.3,12.7,49.5,8],"Rowan County, North Carolina":[9.2,14.5,4,13.6,49.9,8.8],"Rutherford County, North Carolina":[10.3,15.8,5.4,13.9,46.5,8.1],"Sampson County, North Carolina":[9.2,18.1,3.3,16.1,45.5,7.9],"Scotland County, North Carolina":[11.4,20.4,9.2,19.1,33.6,6.3],"Stanly County, North Carolina":[9.5,14.7,2.7,14.6,48.6,9.8],"Stokes County, North Carolina":[12.3,14.2,2.2,10.3,52.5,8.5],"Surry County, North Carolina":[9.8,14.4,3.2,13,50,9.5],"Swain County, North Carolina":[11.4,14.3,3.4,14.9,46.1,9.9],"Transylvania County, North Carolina":[10,12.2,6.2,12.9,51.4,7.3],"Tyrrell County, North Carolina":[11,3.5,1.1,9.1,70.5,4.8],"Union County, North Carolina":[5.4,16.5,3.1,9.9,60.4,4.7],"Vance County, North Carolina":[10.6,22.6,4.3,22.1,34,6.5],"Wake County, North Carolina":[11.6,11.6,6.4,10.3,52.1,8],"Warren County, North Carolina":[12.4,17.9,4.1,21.5,36.3,7.8],"Washington County, North Carolina":[14.3,25.5,2,14.1,34.3,9.8],"Watauga County, North Carolina":[12.4,9.4,26.7,4.8,39.4,7.2],"Wayne County, North Carolina":[11.1,14.1,3.4,14.9,46.6,9.8],"Wilkes County, North Carolina":[9.7,15.6,3.1,11.6,50.5,9.5],"Wilson County, North Carolina":[13.3,15.3,3.4,12.6,46.8,8.6],"Yadkin County, North Carolina":[9.7,17.1,2.8,11.1,53.8,5.5],"Yancey County, North Carolina":[9.5,14.1,1.9,10.2,59.3,5]};
  const cats = ["lives_alone_18_64","with_child_18_64","with_nonrel_18_64","with_other_rel_18_64","with_spouse_only_18_64","with_unmar_partner_18_64"];

  const ORDER = [
    "Lives alone",
    "With child",
    "With nonrelatives",
    "With other relatives",
    "With spouse only",
    "With unmarried partner"
  ];

  const PRETTY_TO_SNAKE = {
    "Lives alone":            "lives_alone_18_64",
    "With child":             "with_child_18_64",
    "With nonrelatives":      "with_nonrel_18_64",
    "With other relatives":   "with_other_rel_18_64",
    "With spouse only":       "with_spouse_only_18_64",
    "With unmarried partner": "with_unmar_partner_18_64"
  };

  const COLOR_BY_CAT = {
    "Lives alone":            "#e41a1c",
    "With child":             "#ff7f00",
    "With nonrelatives":      "#4daf4a",
    "With other relatives":   "#984ea3",
    "With spouse only":       "#377eb8",
    "With unmarried partner": "#a65628"
  };

  // snake key → array index
  const keyToIndex = Object.fromEntries((cats || []).map((k, i) => [String(k), i]));

  function valuesFor(name) {
    const row = data?.[name] || [];
    return ORDER.map(lbl => {
      const idx = keyToIndex[PRETTY_TO_SNAKE[lbl]];
      const v = (idx != null && idx >= 0) ? row[idx] : 0;
      return (typeof v === "number") ? v : Number(v) || 0;
    });
  }

  const canvas = document.getElementById("barChart");
  if (!canvas) return;
  const ctx = canvas.getContext("2d");
  let chart;

  function renderChart(name) {
    const vals = valuesFor(name);
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: ORDER,
        datasets: [{
          data: vals,
          backgroundColor: ORDER.map(c => COLOR_BY_CAT[c]),
          borderWidth: 0
        }]
      },
      options: {
        indexAxis: "y",
        plugins: {
          legend: { display: false },
          tooltip: { callbacks: { label: (c) => c.raw + "%" } }
        },
        scales: {
          x: { min: 0, max: 100, ticks: { callback: v => v + "%" } }
        }
      }
    });
  }

  const DEFAULT_NAME = (data && Object.prototype.hasOwnProperty.call(data, "Statewide"))
    ? "Statewide" : Object.keys(data || {})[0];

  const sel = document.getElementById("countySelect");
  if (sel) sel.addEventListener("change", e => renderChart(e.target.value));
  if (DEFAULT_NAME) renderChart(DEFAULT_NAME);
});</script>
  </body>
</html>
</html>
