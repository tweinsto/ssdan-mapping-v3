<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>

  <meta charset="UTF-8"/>
  <title>Living Arrangements 18–64 – Florida</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
      body { font-family: sans-serif; margin: 1.25rem 2rem; text-align: center; }
      h2 { margin-bottom: .25rem; font-size: 1.6rem; color: #2c348b; }
      label { margin-right: .5rem; }
      select { padding: .45rem .6rem; font-size: 1rem; border-radius: .5rem; border: 2px solid #f39c12; }
      canvas { width: 100%; max-width: 900px; height: 520px; }
    </style>
</head>
<html>
  <body>
    <h2>Living Arrangements of Adults 18–64 in Florida</h2>
    <label>Select County:</label>
    <select id="countySelect">
      <option value="Statewide">Statewide</option>
      <option value="Alachua County, Florida">Alachua County, Florida</option>
      <option value="Baker County, Florida">Baker County, Florida</option>
      <option value="Bay County, Florida">Bay County, Florida</option>
      <option value="Bradford County, Florida">Bradford County, Florida</option>
      <option value="Brevard County, Florida">Brevard County, Florida</option>
      <option value="Broward County, Florida">Broward County, Florida</option>
      <option value="Calhoun County, Florida">Calhoun County, Florida</option>
      <option value="Charlotte County, Florida">Charlotte County, Florida</option>
      <option value="Citrus County, Florida">Citrus County, Florida</option>
      <option value="Clay County, Florida">Clay County, Florida</option>
      <option value="Collier County, Florida">Collier County, Florida</option>
      <option value="Columbia County, Florida">Columbia County, Florida</option>
      <option value="DeSoto County, Florida">DeSoto County, Florida</option>
      <option value="Dixie County, Florida">Dixie County, Florida</option>
      <option value="Duval County, Florida">Duval County, Florida</option>
      <option value="Escambia County, Florida">Escambia County, Florida</option>
      <option value="Flagler County, Florida">Flagler County, Florida</option>
      <option value="Franklin County, Florida">Franklin County, Florida</option>
      <option value="Gadsden County, Florida">Gadsden County, Florida</option>
      <option value="Gilchrist County, Florida">Gilchrist County, Florida</option>
      <option value="Glades County, Florida">Glades County, Florida</option>
      <option value="Gulf County, Florida">Gulf County, Florida</option>
      <option value="Hamilton County, Florida">Hamilton County, Florida</option>
      <option value="Hardee County, Florida">Hardee County, Florida</option>
      <option value="Hendry County, Florida">Hendry County, Florida</option>
      <option value="Hernando County, Florida">Hernando County, Florida</option>
      <option value="Highlands County, Florida">Highlands County, Florida</option>
      <option value="Hillsborough County, Florida">Hillsborough County, Florida</option>
      <option value="Holmes County, Florida">Holmes County, Florida</option>
      <option value="Indian River County, Florida">Indian River County, Florida</option>
      <option value="Jackson County, Florida">Jackson County, Florida</option>
      <option value="Jefferson County, Florida">Jefferson County, Florida</option>
      <option value="Lafayette County, Florida">Lafayette County, Florida</option>
      <option value="Lake County, Florida">Lake County, Florida</option>
      <option value="Lee County, Florida">Lee County, Florida</option>
      <option value="Leon County, Florida">Leon County, Florida</option>
      <option value="Levy County, Florida">Levy County, Florida</option>
      <option value="Liberty County, Florida">Liberty County, Florida</option>
      <option value="Madison County, Florida">Madison County, Florida</option>
      <option value="Manatee County, Florida">Manatee County, Florida</option>
      <option value="Marion County, Florida">Marion County, Florida</option>
      <option value="Martin County, Florida">Martin County, Florida</option>
      <option value="Miami-Dade County, Florida">Miami-Dade County, Florida</option>
      <option value="Monroe County, Florida">Monroe County, Florida</option>
      <option value="Nassau County, Florida">Nassau County, Florida</option>
      <option value="Okaloosa County, Florida">Okaloosa County, Florida</option>
      <option value="Okeechobee County, Florida">Okeechobee County, Florida</option>
      <option value="Orange County, Florida">Orange County, Florida</option>
      <option value="Osceola County, Florida">Osceola County, Florida</option>
      <option value="Palm Beach County, Florida">Palm Beach County, Florida</option>
      <option value="Pasco County, Florida">Pasco County, Florida</option>
      <option value="Pinellas County, Florida">Pinellas County, Florida</option>
      <option value="Polk County, Florida">Polk County, Florida</option>
      <option value="Putnam County, Florida">Putnam County, Florida</option>
      <option value="Santa Rosa County, Florida">Santa Rosa County, Florida</option>
      <option value="Sarasota County, Florida">Sarasota County, Florida</option>
      <option value="Seminole County, Florida">Seminole County, Florida</option>
      <option value="St. Johns County, Florida">St. Johns County, Florida</option>
      <option value="St. Lucie County, Florida">St. Lucie County, Florida</option>
      <option value="Sumter County, Florida">Sumter County, Florida</option>
      <option value="Suwannee County, Florida">Suwannee County, Florida</option>
      <option value="Taylor County, Florida">Taylor County, Florida</option>
      <option value="Union County, Florida">Union County, Florida</option>
      <option value="Volusia County, Florida">Volusia County, Florida</option>
      <option value="Wakulla County, Florida">Wakulla County, Florida</option>
      <option value="Walton County, Florida">Walton County, Florida</option>
      <option value="Washington County, Florida">Washington County, Florida</option>
    </select>
    <canvas id="barChart"></canvas>
    <script>document.addEventListener("DOMContentLoaded", function () {
  const data = {"Statewide":[10.3,16,6.2,14.5,44,9],"Alachua County, Florida":[15,10.6,18.2,10.3,36.6,9.3],"Baker County, Florida":[3.9,13.3,4.6,13.7,53.1,11.4],"Bay County, Florida":[12.6,11.4,4.1,12.3,48.8,10.8],"Bradford County, Florida":[9.7,18.9,6.6,13.8,42.1,8.9],"Brevard County, Florida":[10.7,16.9,4.9,11.5,47.3,8.8],"Broward County, Florida":[10.7,17.7,5.2,16.5,41.7,8.3],"Calhoun County, Florida":[12,18.4,3.5,14.4,43.7,8.1],"Charlotte County, Florida":[8.2,16.8,4.5,11.3,51,8.2],"Citrus County, Florida":[9.1,16.8,4.9,12.9,47.4,8.8],"Clay County, Florida":[7.3,16.5,4.3,11.8,52.3,7.9],"Collier County, Florida":[8.8,15.8,5.2,13.4,49.1,7.6],"Columbia County, Florida":[11,15,5.6,14.6,44.6,9.2],"DeSoto County, Florida":[9,19.1,6.2,18.1,38.1,9.4],"Dixie County, Florida":[7.2,16.5,5.5,14.6,50,6.2],"Duval County, Florida":[14.5,13.7,6.4,14.4,41.6,9.5],"Escambia County, Florida":[13.1,13.6,6.9,14,43.6,8.8],"Flagler County, Florida":[7.8,16.9,4.9,12.6,51.4,6.4],"Franklin County, Florida":[12,13.3,3.1,9.4,47,15.2],"Gadsden County, Florida":[13.5,18.4,2.4,22.4,35.6,7.8],"Gilchrist County, Florida":[7.7,15.3,4.6,10.7,55,6.6],"Glades County, Florida":[9.6,21.8,2.8,11.9,46.4,7.4],"Gulf County, Florida":[11.8,6.9,1,9.5,56.2,14.6],"Hamilton County, Florida":[8.3,15.5,4.7,17.4,45,9.1],"Hardee County, Florida":[6.9,15.9,3.3,16.6,45.6,11.6],"Hendry County, Florida":[8,18.1,5,14.6,42.3,12],"Hernando County, Florida":[7.8,17.9,5.5,13.7,45.1,9.9],"Highlands County, Florida":[11.7,14.6,4.3,13.9,45.2,10.3],"Hillsborough County, Florida":[11.7,13.9,7.6,14.2,43.1,9.5],"Holmes County, Florida":[10.3,19.4,3.7,12.4,48.8,5.4],"Indian River County, Florida":[10.2,20,5.9,13.3,43.9,6.7],"Jackson County, Florida":[11.7,17.9,4,14.7,44.2,7.5],"Jefferson County, Florida":[12.2,17.1,3.9,18.3,42.2,6.3],"Lafayette County, Florida":[6.3,18.9,2.5,21.2,43.9,7.2],"Lake County, Florida":[8.7,16.2,5.1,11.4,50.4,8.3],"Lee County, Florida":[9.8,15.8,6.2,13.5,45.3,9.4],"Leon County, Florida":[15.6,11,17,12.9,33.7,9.7],"Levy County, Florida":[9.4,14.3,5.9,15.4,43.3,11.7],"Liberty County, Florida":[14,15.5,0.6,17.5,47.6,4.7],"Madison County, Florida":[16.2,18.1,6.3,12.9,43.3,3.2],"Manatee County, Florida":[8.8,15.8,5.5,13,48,8.8],"Marion County, Florida":[10.1,16.2,5.4,13.5,46.1,8.7],"Martin County, Florida":[10.5,17.3,5.4,10,48.7,8.1],"Miami-Dade County, Florida":[8.8,18.6,5.3,19.1,38.9,9.3],"Monroe County, Florida":[10.7,10.1,11.2,9.3,49.2,9.5],"Nassau County, Florida":[7.3,14.1,3,12.6,56.9,6.2],"Okaloosa County, Florida":[11.8,12,5.6,10.4,52.8,7.4],"Okeechobee County, Florida":[9.8,13.5,4.2,13.1,49,10.5],"Orange County, Florida":[9.7,15.2,8.5,15.3,41.7,9.6],"Osceola County, Florida":[7.3,20.4,5.7,16.3,42.5,7.8],"Palm Beach County, Florida":[9.6,17.3,6,15.4,43.2,8.5],"Pasco County, Florida":[9.8,16.7,4.9,12.7,48.3,7.6],"Pinellas County, Florida":[14.2,15.1,6.4,11.7,42.6,9.9],"Polk County, Florida":[7.6,16.8,5.8,16.2,43.7,9.8],"Putnam County, Florida":[11.1,15.1,7,14.3,40.5,12],"Santa Rosa County, Florida":[7.5,14.4,6.3,9.6,55.8,6.4],"Sarasota County, Florida":[10.1,13.2,5.1,11.2,51.5,8.9],"Seminole County, Florida":[10.1,14.4,6.5,12.3,47.3,9.3],"St. Johns County, Florida":[6.3,15,4.1,8.2,60.5,5.8],"St. Lucie County, Florida":[8.4,19.6,5.7,14.8,43.3,8.3],"Sumter County, Florida":[10.4,14.3,4.3,9.3,53,8.8],"Suwannee County, Florida":[7,18.5,5.5,14.8,45.1,9],"Taylor County, Florida":[10.3,17.6,3.6,16.1,45,7.4],"Union County, Florida":[9.3,9.1,6.4,11.6,54.9,8.7],"Volusia County, Florida":[10.5,14.8,5.8,12.6,45,11.4],"Wakulla County, Florida":[8.5,17.7,1.6,9.2,53.4,9.7],"Walton County, Florida":[9.3,11,4.9,10.1,56.3,8.3],"Washington County, Florida":[9.8,12.1,5,15.3,51.4,6.3]};
  const cats = ["lives_alone_18_64","with_child_18_64","with_nonrel_18_64","with_other_rel_18_64","with_spouse_only_18_64","with_unmar_partner_18_64"];

  const ORDER = [
    "Lives alone",
    "With child",
    "With nonrelatives",
    "With other relatives",
    "With spouse only",
    "With unmarried partner"
  ];

  const PRETTY_TO_SNAKE = {
    "Lives alone":            "lives_alone_18_64",
    "With child":             "with_child_18_64",
    "With nonrelatives":      "with_nonrel_18_64",
    "With other relatives":   "with_other_rel_18_64",
    "With spouse only":       "with_spouse_only_18_64",
    "With unmarried partner": "with_unmar_partner_18_64"
  };

  const COLOR_BY_CAT = {
    "Lives alone":            "#e41a1c",
    "With child":             "#ff7f00",
    "With nonrelatives":      "#4daf4a",
    "With other relatives":   "#984ea3",
    "With spouse only":       "#377eb8",
    "With unmarried partner": "#a65628"
  };

  // snake key → array index
  const keyToIndex = Object.fromEntries((cats || []).map((k, i) => [String(k), i]));

  function valuesFor(name) {
    const row = data?.[name] || [];
    return ORDER.map(lbl => {
      const idx = keyToIndex[PRETTY_TO_SNAKE[lbl]];
      const v = (idx != null && idx >= 0) ? row[idx] : 0;
      return (typeof v === "number") ? v : Number(v) || 0;
    });
  }

  const canvas = document.getElementById("barChart");
  if (!canvas) return;
  const ctx = canvas.getContext("2d");
  let chart;

  function renderChart(name) {
    const vals = valuesFor(name);
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: ORDER,
        datasets: [{
          data: vals,
          backgroundColor: ORDER.map(c => COLOR_BY_CAT[c]),
          borderWidth: 0
        }]
      },
      options: {
        indexAxis: "y",
        plugins: {
          legend: { display: false },
          tooltip: { callbacks: { label: (c) => c.raw + "%" } }
        },
        scales: {
          x: { min: 0, max: 100, ticks: { callback: v => v + "%" } }
        }
      }
    });
  }

  const DEFAULT_NAME = (data && Object.prototype.hasOwnProperty.call(data, "Statewide"))
    ? "Statewide" : Object.keys(data || {})[0];

  const sel = document.getElementById("countySelect");
  if (sel) sel.addEventListener("change", e => renderChart(e.target.value));
  if (DEFAULT_NAME) renderChart(DEFAULT_NAME);
});</script>
  </body>
</html>
</html>
